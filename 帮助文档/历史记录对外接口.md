# 文档相关名词说明

必传参数：使用数美接口服务时，接口使用者必须传入的参数，否则将导致该接口服务无法正常使用；

强烈建议：使用数美接口服务时，强烈建议接口使用者传入的参数并可大幅度提高识别准确率；

可选：使用数美接口服务时，建议接口使用者传入的参数并可在特定的场景下提高识别准确率。

# 客户配置信息

请求Header参数如下：


| 参数名称 | 类型 | 是否必选 | 说明 |
| --- | --- | --- | --- |
| X-Accesskey | string | 必须参数 | 用于权限认证，开通账号服务时由数美提供 |
| Lang | string | 选填，默认中文 | 语种 |


# 历史详情接口定义

## 接口描述

该接口用于提供查看历史记录详情功能。支持请求数据查看历史记录。

**请求URL:**https://api-web.fengkongcloud.com/api/history/list

**字符编码：**UTF-8

**请求方法：**POST

**建议超时时长**：1s

## 请求参数

放在HTTP Body中，采用Json格式，具体参数如下：


| 字段 | 类型                 | 是否必填 | 说明 |
| --- |--------------------| --- | --- |
| organization | string             | 是 | 公司标识 |
| appld | ☐string            | 否 | 应用，不传为全部 |
| serviceld | string             | 是 | 产品标识 |
| offset | int                | 是 | 偏移量 |
| count | int                | 是 | 总量 |
| startTime | int                | 是 | 毫秒时间戳，例：1591632000000 |
| endTime | int                | 是 | 毫秒时间戳，例：1591632000000 |
| channel | ☐string            | 否 | 渠道，不传为全部 |
| riskLevel | ☐string            | 否 | 识别结果，不传为全部，例：PASS |
| riskType | int/string         | 否 | 风险类型，不传为全部，例：100 |
| description | string             | 否 | 风险原因，不传为全部 |
| search | [map[string]string | 否 | 组合查询 |


其中，search字段如下：


| 字段 | 类型 | 是否必填 | 说明 |
| --- | --- | --- | --- |
| fieldTag | string | 是 | 字段标识 |
| method | string | 是 | 查询方式 |
| value | string | 是 | 值 |
| type | string | 是 | 类型 |


**返回参数**

放在HTTP Body中，采用Json格式，具体参数如下：


| 返回结果参数名 | 参数类型 | 参数说明 | 是否必返 | 备注 |
| --- | --- | --- | --- | --- |
| code | string | 返回码 | 是 |  |
| message | string | 返回码详情描述 | 是 |  |


code 请求返回码列表如下：


| code | message |
|------| --- |
| 1100 | 成功 |
| 1901 | QPS 超限 |
| 1902 | XXXX |


其中search字段具体内容如下：


| method | type | 含义 |
| --- | --- | --- |
| Term | string | 等于 |
| TermNot | string | 不等于 |
| Terms | ☐string | 属于 |
| TermsNot | [string | 不属于 |
| WildcardPrefix | string | 开头匹配 |
| QueryString | string | 包含 |
| WildcardInfixNot | string | 不包含 |
| Wildcardlnfix | string | 包含 |


其中，fieldTag枚举值如下：


| 传参值 | 配置对象 | 服务（空为全服务支持） | 匹配方式 |
| --- | --- | --- | --- |
| tokenld | 账号 |  | Term,TermNot,Terms,TermsNot |
| requestld | 流水号 |  | Term,Terms,TermsNot,WildcardPrefix |
| model | 规则标识 |  | Term |
| text | 文本内容 | POSTTEXT | QueryString,WildcardlnfixNot |
| deviceld | 设备标识 |  | Term,TermNot,Terms,TermsNot |
| matchedltem | 命中敏感词 | 除POSTARTICLE | Wildcardlnfix,WildcardlnfixNot,WildcardPrefix,Term,Terms |
| matchedList | 命中名单 |  | Term,WildcardInfix,Terms |
| nickname | 昵称 |  | QueryString,WildcardlnfixNot |
| ip | IP |  | Term,TermNot,Terms,TermsNot,WildcardPrefix |
| receiveTokenld | 接收者账号 |  | Term,TermNot,Terms,TermsNot |
| room | 房间号 |  | Term |
| level | 用户等级 |  | Term,Terms,TermsNot |
| role | 用户角色 |  | Term,Terms,TermsNot |
| btld | 内容标识 |  | Term |
| smid | 服务端设备标识 |  | Term |
| ipcountry | ip 归属地国家 |  | Term,TermNot |
| ipprovince | ip 归属地省份 |  | Term,TermNot |
| ipcity | ip 归属地城市 |  | Term,TermNot |
| inviteTokenld | 邀请人账号 |  | Term,TermNot,Terms,TermsNot |
| contentld | 内容ID |  | Term |
| imgUrl | 图片URL | POSTIMG,POSTVIDEOIMG,POSTVIDEOSTREAMIMG | Term |
| imgmd5 | 图片MD5 | POSTIMG,POSTVIDEOIMG,POSTVIDEOSTREAMIMG | Term,Terms,TermsNot |
| ocrText | OCR 内容 | POSTIMG,POSTVIDEOIMG,POSTVIDEOSTREAMIMG | QueryString,WildcardlnfixNot |
| audioText | 音频内容 | POSTAUDIO | QueryString,WildcardlnfixNot |
| url | URL | POSTAUJDIO,POSTVIDEO | Term,WildcardPrefix |
| videoName | 视频标题 | POSTVIDEO | QueryString,WildcardlnfixNot |
| text | 文本内容 | POSTTEXT | Wildcardlnfix,WildcardInfixNot |
| contents | 网页文本内容 | POSTARTICLE | QueryString,WildcardinfixNot |
| datald | 第三方datald |  | Term,TermNot,Wildcardlnfix,WildcardlnfixNot |


## 示例

请求示例：

{

"organization": "RlokQwR1vjurTUlkIqog",

"serviceId": "POSTTEXT",

"appId": "default",

"count":20,

"offset":0,

"search": [

{

"fieldTag": "requestId",

"method": "TermsNot",

"type":"[]string",

"value": [

"1,2,3"

]

}

],

"startTime": 1708012800000,

"endTime": 1708617599999,

"description":[

＂涉政”，

＂色情”

]

}

成功返回示例：

{

"code":1100,

"contents":[

{

"appId": $\text {"xxxx"}$ 

"businessLabels":{

"header":[

{

"key": "businessDescription",

＂value":＂命中业务标签＂

}

],

"value": []

},

＂channel":＂智能文本识别”，

"contextText": **"xxxxxxxxxx** $\text {xxxxx"}$ 

＂description":＂涉政：敏感政治事件：七五事件”，

"deviceId": "",

＂eventId":＂智能文本识别＂，

"extra": {

"data.extra.isTokenSeparate": 1

},

"feedback":0,

＂ignoreItems":＂我＂，

"ipcity":"",

"ipcountry":"",

"ipprovince": 11

＂isTokenSeparate":＂区分＂，

＂matchedItem": "xx，人，xxxxx"，

"matchedList": "xxxxx,xxxxxxxxxxxx,xxxxxxxxxxx

"model": "MA000001014001001",

"originalType": "xxxxx",

"rawValue": {

"appId": "xxxx",

"channel":"text",

"eventId": "text",

"isTokenSeparate":1,

"matchedItem": "xx",

＂matchedList":＂名单测试＂，

"originalType": "POLITY",

"riskLevel": "REJECT",

"riskType": 100,

"timestamp": 1708399329271,

"type": "POLITYECOMBUILTIN"

},

"requestId": **"xxxxxxxxxxxxxxx",**

"requestId1": **"xxxxxxxxxxxxxxxx",**

＂riskLevel":＂拒绝＂，

"riskList":{

"header":[

{

"key": "riskLevel",

＂value":＂识别结果”

},

{

"key": "riskType",

＂value":＂风险类型＂

},

{

"key": "riskReasons",

＂value":＂风险原因”

},

{

"key": "model",

＂value":＂规则标识”

},

{

"key": "riskDetail",

＂value":＂风险详情＂

}

],

"value":[

{

"model": "MA000001020001666",

"riskDetail":"",

＂riskLevel":＂拒绝＂，

＂riskReasons":＂涉政：涉政：涉政＂，

＂riskType":＂涉政＂

},

{

"model": "MB000100100111134",

"riskDetail":"",

＂riskLevel":＂拒绝”，

＂riskReasons":＂测试一级标签：测试二级标签1:SMLable8"，

＂riskType":＂正常”

},

{

"mode1": "MB000100100111751",

"riskDetail":"",

＂riskLevel":＂审核＂，

＂riskReasons":＂测试一级标签：测试二级标签1:SMLable8"，

＂riskType":＂正常＂

},

{

"model": "MB000100100111022",

"riskDetail":"",

＂riskLevel":＂拒绝＂，

＂riskReasons":＂测试一级标签：测试二级标签1:SMLab1e8"，

＂riskType":＂正常＂

},

{

"model": "MA000001015010001",

＂riskDetail":＂武汉＂，

＂riskLevel":＂拒绝＂，

＂riskReasons":＂名单测试＂，

＂riskType":＂涉政＂

},

{

"model": "MA000001014001001",

＂riskDetail":＂武汉＂，

＂riskLevel":＂拒绝＂，

＂riskReasons":＂名单测试＂，

＂riskType":＂涉政”

},

{

"model": "MB000001008018075",

＂riskDetail":＂武汉＂，

＂riskLevel":＂拒绝＂，

＂riskReasons":＂名单测试＂，

＂riskType":＂涉政＂

}

]

},

＂riskType":＂涉政＂，

"smid":"",

"text": "xxxxxxxxxxxxxxxxxxx。",

"timestamp": "2024-02-20 11:22:09",

"tokenId": "1708399328142",

＂type":＂涉政识别电商BUILTIN＂

}

],

＂message":＂操作成功＂，

"requestId": "0811d3c0f60b491de1d3718de86fc7ec",

"totalCount": 10000

}

