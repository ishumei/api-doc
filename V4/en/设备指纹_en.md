# Shumei - Device Fingerprint

---

***All rights reserved. Unauthorized reproduction is prohibited***

---

* [Device Fingerprint](#riskDiscernInterface)
  + [Invocation Timing](#requestParameter)
  + [Specific Interface](#requestInterface)
    - [Request URL](#requestUrl)
    - [Character Encoding Format](#requestEncode)
    - [Request Method](#requestMethod)
    - [Suggested Timeout Duration](#requestTimeout)
    - [Request Parameters](#requestParameters)
  + [Response](#response)
  + [Example](#example)
    - [Request Example](#requestExample)
    - [Response Example](#responseExample)

# <span id = "riskDiscernInterface">Device Fingerprint</span>

## <span id = "requestParameter">Invocation Timing</span>

This interface is called when risk identification is needed, for example:

1. After a new user registers, perform a risk profile query for differentiated distribution of newcomer red envelopes, registration gifts, etc.;
2. After an existing user logs in, perform a risk profile query for differentiated distribution in daily activity operations;
3. Before issuing activity rewards, perform a risk profile query, such as for random red envelopes, lotteries, and other probabilistic activities;
4. Daily routine queries to update the profile database or risk control engine data.

## <span id = "requestInterface">Specific Interface</span>

### <span id = "requestUrl">Request URL:</span>


| Cluster         | URL                                                        | Supported Product List |
| -------------- | ------------------------------------------------------------ | -------------- |
| Beijing Cluster     | `http://api-tianxiang-bj.fengkongcloud.com/tianxiang/v4`   | Tianxiang Risk Identification |
| Singapore Cluster   | `http://api-tianxiang-xjp.fengkongcloud.com/tianxiang/v4`  | Tianxiang Risk Identification |
| Frankfurt Cluster | `http://api-tianxiang-eur.fengkongcloud.com/tianxiang/v4`  | Tianxiang Risk Identification |
| Virginia Cluster | `http://api-tianxiang-fjny.fengkongcloud.com/tianxiang/v4` | Tianxiang Risk Identification |

### <span id = "requestMethod">Request Method:</span>

`POST`

### <span id = "requestEncode">Character Encoding:</span>

`UTF-8`

### <span id = "requestTimeout">Suggested Timeout Duration:</span>

1s

### <span id = "requestParameters">Request Parameters:</span>

Placed in the HTTP Body, in JSON format, with specific parameters as follows:


| **Request Parameter Name** | **Type**    | **Parameter Description**                                                                                         | **Required** | **Specification**                                        |
| ---------------- | ------------- | ------------------------------------------------------------------------------------------------------ | -------------- | ------------------------------------------------- |
| accessKey      | string      | Interface authentication key<br/>Used for permission authentication, provided by Shumei when the account service is activated or viewed in the relevant document section in the upper right corner of the Shumei backend when logging in with the activation email | Required     | Assigned by Shumei                                        |
| data           | json_object | Request data content                                                                                       | Required     | Request data content, maximum 10MB, [see data parameter](#data) |

<span id = "data">Among them, the content of data is as follows:</span>


| **Request Parameter Name** | **Type** | **Parameter Description**                      | **Required** | **Specification**                                                 |
| ---------------- | ---------- | ----------------------------------- | -------------- | ---------------------------------------------------------- |
| deviceId       | string   | Device fingerprint ID to be queried, generated by Shumei SDK | Cannot be empty     | Pass in the value obtained by calling the getDeviceId() method on the front end |

## <span id = "response">Response</span>

Placed in the HTTP Body, in JSON format, with specific parameters as follows:


| **Parameter Name**      | **Parameter Type** | **Parameter Description** | **Required** | **Specification**                                                                                                                                                                                                    |
| ------------------- | -------------- | -------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code              | int          | Return code       | Yes           | `1100`: Success<br/>`1901`: QPS limit exceeded<br/>`1902`: Invalid parameter<br/>`1903`: Service failure<br/>`1911`: Image download failure<br/>`9101`: Unauthorized operation<br/>`3000`: Operator error<br/>Fields other than message and requestId only exist when the code is 1100 |
| message           | string       | Return code description   | Yes           | Corresponds to code: `Success QPS limit exceeded Invalid parameter Service failure Insufficient balance Unauthorized operation`                                                                                                                                          |
| requestId         | string       | Request identifier     | Yes           | Unique request identifier, used for troubleshooting and subsequent effect optimization, strongly recommended to save                                                                                                                                                      |
| profileExist      | int          | Device profile exists | Yes           | `1`: Device information exists in the profile database`0`: Device information does not exist in the profile database                                                                                                                                                    |
| deviceLabels      | json_object  | Device label information | No           | See details below, returned only when deviceId is passed in and the service is activated                                                                                                                                                            |
| devicePrimaryInfo | Json_object  | Device attribute information | No           | Requires rawdata reporting to be activated, (it is recommended to use the encrypted return interface v2/device/rawdata)                                                                                                                                               |
| deviceRiskLabels  | json_array   | Device risk labels | No           | See details below, returned only when deviceId is passed in and the service is activated                                                                                                                                                            |

Among them

**1) Details of deviceLabels results**


| ***Return Result Parameter Name***     | ***Parameter Type*** | ***Parameter Description***             | ***Specification***             |
| -------------------------- | ---------------- | ---------------------------- | ------------------------ |
| id                       | string         | Device identifier                   |                        |
| last_active_ts           | int            | Last upload time of device data   | Can be used as the last update time of the label |
| fake_device              | json_object    | Labels related to false information     |                        |
| device_suspicious_labels | json_object    | Labels related to suspicious devices     |                        |
| device_active_info       | json_object    | Labels related to active devices     |                        |
| monkey_device            | Json_object    | Labels related to machine-controlled devices |                        |

Details of fake_device are as follows:


| ***Return Result Parameter Name***          | ***Parameter Type*** | ***Parameter Description***           | ***Specification***                                                                                                                                              |
| ------------------------------- | ---------------- | -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- |
| b_pc_emulator                 | int            | PC emulator                 | Android emulator running on PC, such as LDPlayer, value: `0`: Not a PC emulator`1`: Is a PC emulator                                                                                      |
| b_pc_emulator_last_ts         | int            | PC emulator time             |                                                                                                                                                         |
| b_cloud_device                | int            | Cloud phone device               | Cloud phone device, such as Red Finger, value: `0`: Not a cloud phone device`1`: Is a cloud phone device                                                                                        |
| b_cloud_device_last_ts        | int            | Cloud phone device time           |                                                                                                                                                         |
| b_altered                     | int            | Tampered device                 | Device information is tampered with, causing the device ID to be tampered with, value: `0`: Not a tampered device`1`: Is a tampered device                                                                                      |
| b_altered_last_ts             | int            | Tampered device time             |                                                                                                                                                         |
| b_multi_boxing                | int            | Multi-instance device                 | Multi-instance tool used for multi-instance, such as DualSpace, and the current APP is in a multi-instance environment, value: `0`: Not in a multi-instance environment`1`: In a multi-instance environment                                         |
| b_multi_boxing_last_ts        | int            | Multi-instance device time             |                                                                                                                                                         |
| b_faker                       | int            | Fake device                 | All or part of the key data is missing or forged when the device data is reported, resulting in malicious behavior of forging the device ID to hit the business interface, value: `0`: Not a fake device`1`: Is a fake device                                  |
| b_faker_last_ts               | int            | Fake device time             |                                                                                                                                                         |
| b_farmer                      | int            | Farm device                 | Multiple devices performing automated operations, forming a device farm, and committing malicious acts in batches, value: `0`: Not a farm device`1`: Is a farm device                                                                      |
| b_farmer_last_ts              | int            | Farm device time             |                                                                                                                                                         |
| b_offerwall                   | int            | Offerwall device               | Device installed with offerwall and other money-making tools, value: `0`: Not an offerwall device`1`: Is an offerwall device                                                                                  |
| b_offerwall_last_ts           | int            | Offerwall device time           |                                                                                                                                                         |
| other                         | json_object    | Other false devices             |                                                                                                                                                         |
| b_phone_emulator              | int            | Phone emulator               | Android emulator running on phone, such as VMOS, value: `0`: Not a phone emulator`1`: Is a phone emulator                                                                                |
| b_phone_emulator_last_ts      | int            | Phone emulator time           |                                                                                                                                                         |
| b_alter_route                 | int            | Tampered location             | Device tampered with GPS location, value: `0`: Device did not tamper with GPS information`1`: Device tampered with GPS information                                                                                     |
| b_alter_route_last_ts         | int            | Last time tampered location label | 13-digit timestamp                                                                                                                                              |
| b_alter_route_periods         | array          | Tampered location travel time periods   | Value is the time period from the first to the last detected tampered location in each trip. Example: `b_alter_route_periods:[1616688431748- 1616688431749, 1616688431766- 1616688431799]` |
| b_multi_boxing_by_os          |                | System multi-instance                 | System built-in multi-instance, and the current APP is in a multi-instance environment, value: `0`: Not in a multi-instance environment`1`: In a multi-instance environment                                                         |
| b_multi_boxing_by_os_last_ts  | int            | Last time system multi-instance     | 13-digit timestamp                                                                                                                                              |
| b_multi_boxing_by_app         |                | Tool multi-instance                 | Multi-instance tool used for multi-instance, such as DualSpace, and the current APP is in a multi-instance environment, value: `0`: Not in a multi-instance environment`1`: In a multi-instance environment                                         |
| b_multi_boxing_by_app_last_ts | int            | Last time tool multi-instance     | 13-digit timestamp                                                                                                                                              |
| b_pc_emulator_pc_id           | string         | PC device ID where the emulator is located       | Multiple emulators of the same model opened on the same PC, b_pc_emulator_pc_id values are the same ,  This label only exists when using SDK version 3.2.2 and above.                                          |

Details of other are as follows:


| ***Return Result Parameter Name*** | ***Parameter Type*** | ***Parameter Description***     | ***Specification***                                                                           |
| ---------------------- | ---------------- | -------------------- | -------------------------------------------------------------------------------------- |
| b_mismatch           | int            | Device parameter mismatch     | Device parameters do not match normal parameters, such as an 8-core phone detected as 3-core, value: `0`: Parameters are normal`1`: Parameters are abnormal |
| b_mismatch_last_ts   | int            | Device parameter mismatch time |                                                                                      |

Details of device_suspicious_labels are as follows:


| ***Return Result Parameter Name***          | ***Parameter Type*** | ***Parameter Description***        | ***Specification***                                                                                                         |
| ------------------------------- | ---------------- | ----------------------- | -------------------------------------------------------------------------------------------------------------------- |
| b_root                        | int            | Root device              | Device is rooted, value: `0`: Device is not rooted`1`: Device is rooted                                                                 |
| b_root_last_ts                | int            | Root time              |                                                                                                                    |
| b_sim                         | int            | SIM card status             | Device's SIM card status is abnormal, such as no SIM card or SIM card not working properly, value: `0`: SIM card status is normal`1`: SIM card status is abnormal                      |
| b_sim_last_ts                 | int            | SIM card time             |                                                                                                                    |
| b_debuggable                  | int            | Debug mode              | Debug mode is enabled, could be used by developers or black industry, value: `0`: Not in debug mode`1`: In debug mode                                     |
| b_debuggable_last_ts          | int            | Debug mode time          |                                                                                                                    |
| b_vpn                         | int            | VPN                   | Using VPN proxy IP, possibly for bypassing restrictions or malicious acts, value: `0`: Not using VPN`1`: Using VPN                                            |
| b_vpn_last_ts                 | int            | VPN time               |                                                                                                                    |
| b_monkey_apps                 | int            | Automation tools            | Device installed with automation frameworks such as Auto.js, value: `0`: No automation tools installed`1`: Automation tools installed                   |
| b_monkey_apps_last_ts         | int            | Automation tools time        |                                                                                                                    |
| b_acc                         | int            | Accessibility service              | Device has accessibility service enabled, capable of automated operations, could be used by some software for automated installation, value: `0`: Accessibility service not enabled`1`: Accessibility service enabled |
| b_acc_last_ts                 | int            | Accessibility service time          |                                                                                                                    |
| b_multi_boxing_apps           | int            | Multi-instance tools              | Device installed with multi-instance tools, but not necessarily for the current APP, value: `0`: No multi-instance tools installed`1`: Multi-instance tools installed                |
| b_multi_boxing_apps_last_ts   | int            | Multi-instance time              |                                                                                                                    |
| b_hook                        | int            | Hooked device          | Process is injected with other code or libraries. Value: `0`: Process not injected with other code or libraries`1`: Process injected with other code or libraries                         |
| b_hook_last_ts                | int            | Hook time              |                                                                                                                    |
| b_vpn_apps                    | int            | VPN tools               | Device installed with VPN tools such as Sesame Proxy, value: `0`: Not found`1`: VPN tools installed                                                 |
| b_vpn_apps_last_ts            | int            | VPN tools time           |                                                                                                                    |
| b_manufacture                 | int            | Engineering mode              | Device is in engineering mode: `0`: Not in engineering mode`1`: In engineering mode                                                             |
| b_manufacture_last_ts         | int            | Engineering mode time          |                                                                                                                    |
| b_icloud                      | int            | Not logged into iCloud account      | Device not logged into iCloud account, value: `0`: Device logged into iCloud account`1`: Device not logged into iCloud account                                     |
| b_icloud_last_ts              | int            | Not logged into iCloud account time  |                                                                                                                    |
| b_wx_code                     | int            | WeChat code platform          | Device installed with WeChat code platform, value: `0`: Not found`1`: WeChat code platform installed                                   |
| b_wx_code_last_ts             | int            | WeChat code platform time      |                                                                                                                    |
| b_sms_code                    | int            | SMS code platform          | Device installed with SMS code platform, value: `0`: Not found`1`: SMS code platform installed                                   |
| b_sms_code_last_ts            | int            | SMS code platform time      |                                                                                                                    |
| b_low_osver                   | int            | Low operating system version        | iOS device operating system version less than 9, value: `0`: iOS device operating system version not less than 9`1`: iOS device operating system version less than 9                       |
| b_low_osver_last_ts           | int            | Low operating system version time    |                                                                                                                    |
| b_remote_control_apps         | int            | Remote control tools          | Device using remote control tools, value: `0`: Device not using remote control tools`1`: Device using remote control tools                                 |
| b_remote_control_apps_last_ts | int            | Remote control tools time      |                                                                                                                    |
| b_repackage                   | int            | Repackaged                | App name and signature do not match, value: `0`: App name and signature match`1`: App name and signature do not match                                                |
| b_repackage_last_ts           | int            | Repackaged time            |                                                                                                                    |
| b_alter_loc                   | int            | Tampered location          | Device tampered with location, value: `0`: Device did not tamper with location`1`: Device tampered with location                                             |
| b_alter_loc_last_ts           | int            | Tampered location time      |                                                                                                                    |
| b_reset                       | int            | Suspected reset              | Device suspected of reset, value: `0`: Device not suspected of reset`1`: Device suspected of reset                                                         |
| b_reset_last_ts               | int            | Suspected reset time          |                                                                                                                    |
| b_console                     | int            | Debug mode enabled          | Device enabled debug mode, value: `0`: Device did not enable debug mode`1`: Device enabled debug mode                                                   |
| b_console_last_ts             | int            | Debug mode enabled time      |                                                                                                                    |
| b_alter_apps                  | int            | Installed tampering tools          | Device installed with tampering tools, such as App Cloner, value: `0`: Device did not install tampering tools`1`: Device installed tampering tools                               |
| b_alter_apps_last_ts          | int            | Installed tampering tools time      |                                                                                                                    |
| b_game_cheat_apps             | int            | Installed game cheat tools      | Device installed with game cheat tools, such as GameGuardian, value: `0`: Device did not install game cheat tools`1`: Device installed game cheat tools                   |
| b_game_cheat_apps_last_ts     | int            | Installed game cheat tools time  |                                                                                                                    |
| b_adb_enable                  | int            | Developer mode enabled adb     | Label `1` indicates that the device has enabled developer mode and adb debugging. Only SDK version 3.1.0 and above can recognize this label                                 |
| b_adb_enable_last_ts          | int            | Developer mode enabled adb time |                                                                                                                    |

Details of device_active_info are as follows:


| ***Return Result Parameter Name***  | ***Parameter Type*** | ***Parameter Description*** | ***Specification*** |
| ----------------------- | ---------------- | ---------------- | ------------ |
| i_smid_boot_timestamp | int            | System boot time   |            |

Details of monkey_device are as follows:


| ***Return Result Parameter Name*** | ***Parameter Type*** | ***Parameter Description*** | ***Specification*** |
| ---------------------- | ---------------- | ---------------- | ------------ |
| common               | int            | General           |            |
| monkey_game          | int            | Game control       |            |
| monkey_read          | int            | Information reading       |            |

Details of common are as follows:


| ***Return Result Parameter Name***  | ***Parameter Type*** | ***Parameter Description***         | ***Specification***                                                                                         |
| -----------------------