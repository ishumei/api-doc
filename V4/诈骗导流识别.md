# 数美天网-诈骗导流识别

---

版权所有 翻版必究

---

[诈骗导流识别](#riskDiscernInterface)

+ [事件接口](#requestInterface)
  + [接口定义](#requestInterface)
    - [请求URL](#requestUrl)
    - [字符编码格式](#requestEncode)
    - [请求方法](#requestMethod)
    - [建议超时时长](#requestTimeout)
    - [请求参数](#requestParameters)
    - [返回结果](#response)
  + [事件列表](#eventIdList)
  + [事件详细API](#data)
  + [示例](#requestExample)
    - [请求示例](#requestExp)
    - [返回示例](#requestResponseExp)
+ [查询接口](#query)
  + [接口定义](#query)
    - [请求URL](#queryUrl)
    - [字符编码格式](#queryEncode)
    - [请求方法](#queryMethod)
    - [建议超时时长](#queryTimeout)
    - [请求参数](#queryParameters)
    - [返回结果](#queryResponse)
  + [示例](#queryExample)
    - [请求示例](#queryExp)
    - [返回示例](#queryResponseExp)
+ [文本接口](#text)
  + [接口定义](#text)
    - [请求URL](#textUrl)
    - [字符编码格式](#textEncode)
    - [请求方法](#textMethod)
    - [建议超时时长](#textTimeout)
    - [请求参数](#textParameters)
    - [返回结果](#textResponse)
  + [示例](#textExample)
    - [请求示例](#textExp)
    - [返回示例](#textResponseExp)

# <span id = "riskDiscernInterface">诈骗导流识别</span>

## <span id = "requestInterface">事件接口</span>

### <span id = "requestUrl">请求URL：</span>


| 集群             | URL                                                 | 支持产品列表 |
| ------------------ | ----------------------------------------------------- | -------------- |
| 北京             | `http://api-skynet-bj.fengkongcloud.com/v4/event`   | 天网风险识别 |
| 美国（弗吉尼亚） | `http://api-skynet-fjny.fengkongcloud.com/v4/event` | 天网风险识别 |
| 新加坡           | `http://api-skynet-xjp.fengkongcloud.com/v4/event`  | 天网风险识别 |
| 欧洲（法兰克福） | `http://api-skynet-eur.fengkongcloud.com/v4/event`  | 天网风险识别 |

### <span id = "requestMethod">请求方法：</span>

`POST`

### <span id = "requestEncode">字符编码：</span>

`UTF-8`

### <span id = "requestTimeout">建议超时时间：</span>

1s

### <span id = "requestParameters">请求参数：</span>

请求body = 通用请求参数 + 事件特有参数 （放在data字段下）

#### <span id = "general">通用的请求参数：</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| -------------- | ------------- | ------------------------------------------------------------------------------------------------------ | -------------- | ---------------------------------------------------------------------------------------------- |
| accessKey    | string      | 接口认证密钥<br/>用于权限认证，开通账号服务时由数美提供或使用开通邮箱登录数美后台右上角相关文档处查看 | 必传参数     | 数美分配                                                                                     |
| appId        | string      | 应用ID，用于区分相同公司的不同应用                                                                   | 必传参数     | 该参数传递值可与数美协商。<br/>当公司app存在多个马甲包，分下面两种情况：<br/>1. 马甲包账号互通，不同马甲包数据传入不同的appId，tokenId保持一致<br/>2. 马甲包账号独立，不同马甲包数据传入不同的appId，tokenId必须不同                                                                     |
| eventId      | string      | 事件ID，用于标识事件类型。                                                                           | 必传参数     | 不同的事件对应不同的策略，不同的事件输入参数可能会有细微的差别，请对应按照各事件详细传参说明 |
| data         | json_object | 请求的数据内容                                                                                       | 必传参数     | 请求的数据内容，最长10MB，[详见data参数](#data)                                              |

<span id = "data">其中，data的内容如下：</span>


| **参数名称**    | **类型** | **参数说明**                                                                                                                                    | **是否必传** | **规范**                                                                                                                                                                                                                                                                                                         |
| ----------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| tokenId         | string   | 用户账号标识，建议使用贵司用户UID（可加密）自行生成 , 标识用户唯一身份用作灌水和广告等行为维度风控。如无用户uid的场景建议使用唯一的数据标识传值 | 必传参数 | 注意点：<br/>1. tokenId传入业务系统中的用户ID，务必保证接入数美全部事件相同用户传入的用户ID值一致且唯一<br/>2. 如果公司主体下存在多个应用且需要按应用区分账号，即相同用户ID在不同应用中代表不同用户。则建议在传入的用户ID之前拼接应用标识作为tokenId传入，达到区分账号体系的目的。 <br/>3. 如果没有区分需求，则直接将用户ID传入tokenId字段即可<br/>4. 如果传入错误，会导致系统认为是不同账号，账号的行为无法关联，导致识别不准确                                                                                                                                                                                                                                                          |
| ip              | string   | 当前业务事件发生时的客户端公网ipv4地址                                                                                                          | 必传参数     | 非内网ip                                                                                                                                                                                                                                                                                                         |
| timestamp       | int64    | 当前业务事件发生时的时间戳，单位为毫秒（ms）                                                                                                    | 必传参数     |                                                                                                                                                                                                                                                                                                                  |
| deviceId        | string   | 数美设备指纹标识，由数美SDK生成                                                                                                                 | 强烈建议     | 数美设备指纹标识，用于用户行为分析。<br/>注：<br/>1. 接入数美SDK前的版本，无法获取到deviceId的情况下，deviceId传空“”即可；                                                          <br/>     2. 直接传输getDeviceId获取到的原始字段，不需要解密                                                               |
| os              | string   | 应用端操作系统类型                                                                                                                              | 强烈建议     | 可选值：`android、ios、weapp、web`                                                                                                                                                                                                                                                                               |
| appVersion      | string   | 应用版本号                                                                                                                                      | 强烈建议     | 传入当前应用或服务正在使用的版本号，格式为3个点4段数字，每段数字最多4位，例如`3.2.1.1234`。不足4段的请补0，例如`2.1.5`传入`2.1.5.0`。多于4段的取前4段，例如`2.1.5.1.1`传入`2.1.5.1`。                                                                                                                            |
| activityId      | string   | 营销活动id                                                                                                                                      | 强烈建议     | 建议传入对应营销活动标识id                                                                                                                                                                                                                                                                                       |
| phone           | string   | 手机号                                                                                                                                          | 强烈建议     |                                                                                                                                                                                                                                                                                                                  |
| userAgent           | string   | 用户代理                                                                                                                                          | 强烈建议     |                                                                                                                                                                                                                                                                                                                  |
| countryCode     | string   | 手机用户的国家代码                                                                                                                              | 强烈建议     | 中国大陆区手机号填写`0086`非中国大陆区手机号填写国家代码例如：美国填写`0001`、安道尔`0376`、巴哈马`1242`                                                                                                                                                                                                         |
| phoneMd5        | string   | 手机号的phoneMd5加密串                                                                                                                          | 建议         |                                                                                                                                                                                                                                                                                                                  |
| phoneSha256     | string   | 手机号的Sha256加密串                                                                                                                            | 建议         |                                                                                                                                                                                                                                                                                                                  |
| role            | string   | 角色                                                                                                                                            | 强烈建议     | 可选值(强校验取值只能为空、`ADMIN`、`HOST`)；`HOST`代表主播，针对主播，将会放开多开、PC模拟器规则以及关联频度策略阈值，以保证主播的正常体验和使用。                                                                                                                                                              |
| level           | int      | 用户等级，针对不同等级的用户可配置不同拦截策略                                                                                                  | 强烈建议     | 可选值：`0,1,2,3,4`分别对应：<br/>`0`：最低级用户，典型如新注册、完全不活跃或等级为0的用户等<br/>`1`：较低级用户，典型如低活跃或低等级用户等<br/>`2`：中等级用户，典型如具备一定活跃或等级中等的用户等<br/>`3`：较高级用户，典型如高活跃或高等级用户等4：最高级用户，典型如付费用户、VIP用户、可考虑放过的用户等 |
| vdata           | json     | 微行为数据传入字段                                                                                                                              | 建议         |                                                                                                                                                                                                                                                                                                                  |
| extra           | json     | 用户自定义数据                                                                                                                                  | 建议         | 如无必要，不传                                                                                                                                                                                                                                                                                                   |
| passThrough     | json     | 用户自定义透传字段                                                                                                                              | 建议         | 如无必要，不传                                                                                                                                                                                                                                                                                                   |

### <span id = "response">返回结果</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **参数名称**       | **类型**    | **参数说明**             | **是否必返** | **规范**                                                                                                                                                                                                           |
| -------------------- | ------------- | -------------------------- | -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code               | int         | 返回码                   | 是           | `1100`：成功<br/>`1901`：QPS超限<br/>`1902`：参数不合法<br/>`1903`：服务失败<br/>`1911`：图片下载失败<br/>`9101`：无权限操作<br/>`3000`：运营商错误<br/>除message和requestId之外的字段，只有当code为1100时才会存在 |
| message            | string      | 返回码描述               | 是           | 和code对应：`成功 QPS超限 参数不合法 服务失败 余额不足 无权限操作`                                                                                                                                                 |
| requestId          | string      | 请求标识                 | 是           | 请求唯一标识，用于排查问题和后续效果优化，强烈建议保存                                                                                                                                                             |
| riskevel           | string      | 当前事件的处置建议       | 是           | `PASS`：通过<br/>`REVIEW`：审核<br/>`REJECT`：拒绝<br/> `VERIFY`:验证                                                                                                                                              |
| detail             | json_object | 风险详情信息，详情见下文 | 是           | 请见《detail结果详情》表                                                                                                                                                                                           |
| tokenProfileLabels | json_array  | 账号属性标签             | 否           | 见下面详情内容，仅在服务开通时返回                                                                                                                                                                                 |
| tokenRiskLabels    | json_array  | 账号风险标签             | 否           | 见下面详情内容，仅在服务开通时返回                                                                                                                                                                                 |

其中

1）detail结果的详情内容


| **返回结果参数名** | **参数类型** | **参数说明**                             | **规范**                                                                                                                                                                                                  |
| -------------------- | -------------- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| description        | string       | 当前事件的风险描述                       |                                                                                                                                                                                                           |
| model              | string       | 规则标识，命中的最高优先级规则标识       |                                                                                                                                                                                                           |
| hits               | Json array   | 事件命中的所有规则标识                   | hits中每个字段都是一个object，详见《hits结果详情信息》                                                                                                                                                    |
| ip_country         | string       | ip归属地国家                             |                                                                                                                                                                                                           |
| ip_province        | string       | ip归属地省份                             |                                                                                                                                                                                                           |
| ip_city            | string       | ip归属地城市                             |                                                                                                                                                                                                           |
| verifyType         | string       | 当处置建议为`VERIFY`时，返回`verifyType` | `UPSMS`：上行短信验证码<br/>`DOWNSMS`：下行短信验证码<br/>`CAPTCHA`：验证码（点选或滑动等）<br/>`SEQUENCE`：语序验证（点选或输入）<br/>`SPATIAL`：空间逻辑推理<br/>`FACE`：人脸检测<br/>`DELAY`：延时交易 |
| machineAccountRisk            | json       | 账号历史打黑信息                             | 只有当前账号历史被打入账号黑库后，账号的相关流水才会返回该结构体       |   

其中，hits结果详情的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明**                             | **规范**                                                                                                                                                                                                  |
| -------------------- | -------------- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| description        | string       | 当前事件的风险描述                       |                                                                                                                                                                                                           |
| model              | string       | 规则标识                                 |                                                                                                                                                                                                           |
| riskLevel          | string       | 当前事件的处置建议                       | `PASS`：通过<br/>`REVIEW`：审核<br/>`REJECT`：拒绝<br/>`VERIFY`:验证                                                                                                                                      |
| verifyType         | string       | 当处置建议为`VERIFY`时，返回`verifyType` | `UPSMS`：上行短信验证码<br/>`DOWNSMS`：下行短信验证码<br/>`CAPTCHA`：验证码（点选或滑动等）<br/>`SEQUENCE`：语序验证（点选或输入）<br/>`SPATIAL`：空间逻辑推理<br/>`FACE`：人脸检测<br/>`DELAY`：延时交易 |

其中，machineAccountRisk详情的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明**         | **规范**                   |
| -------------------- | -------------- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| tokenSampleLastTs        | int       | 最近打黑时间，毫秒级                       |  如："tokenSampleLastTs": 1683026613000                                                                                                                                                                                                         |
| tokenSampleDesc              | string       | 历史打黑策略的description                                 |  如："tokenSampleDesc": "高风险设备：IP异常聚集"                                                                                                                                                                                                         |

其中标签类返回字段

1）tokenProfileLabels的详情内容


| **返回结果参数名** | **参数类型** | **参数说明**           | **规范**                     |
| -------------------- | -------------- | ------------------------ | ------------------------------ |
| label1             | string       | 一级标签               | 展示账号属性标签的一级标签。 |
| label2             | string       | 二级标签               | 展示账号属性标签的二级标签。 |
| label3             | string       | 三级标签               | 展示账号属性标签的三级标签。 |
| description        | string       | 风险描述               | 展示账号属性标签的中文描述。 |
| timestamp          | int64        | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail             | json_object  | 证据描述               | 证据细节                     |

2）tokenRiskLabels的详情内容


| **返回结果参数名** | **参数类型** | **参数说明**           | **规范**                     |
| -------------------- | -------------- | ------------------------ | ------------------------------ |
| label1             | string       | 一级标签               | 展示账号风险标签的一级标签。 |
| label2             | string       | 二级标签               | 展示账号风险标签的二级标签。 |
| label3             | string       | 三级标签               | 展示账号风险标签的三级标签。 |
| description        | string       | 风险描述               | 展示账号风险标签的中文描述。 |
| timestamp          | int64        | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail             | json_object  | 证据描述               | 证据细节                     |

3） 三级标签说明



| 一级标签                         | 一级标识                         | 二级标签                         | 二级标识                  | 三级标签                     | 三级标识           |
| ---------------------------------- | ---------------------------------- | ---------------------------------- | --------------------------- | ------------------------------ | -------------------- |
| risk_register_token              | 风险注册账号                     | monkey_register_token            | 机器注册账号              | monkey_register_token        | 机器注册账号       |
| risk_login_token                 | 风险登录账号                     | environment_change_token         | 环境跳变账号              | unusual_device_login_token   | 异常设备登录账号   |
| risk_login_token                 | 风险登录账号                     | environment_change_token         | 环境跳变账号              | unusual_region_login_token   | 异常地域登录账号   |
| risk_login_token                 | 风险登录账号                     | account_takeover_token           | 撞库盗号账号              | <br/> account_takeover_token | 撞库盗号账号       |
| risk_login_token                 | 风险登录账号                     | monkey_login_token               | 机器登录账号              | monkey_login_token           | 机器登录账号       |
| marketing_cheating_token         | 营销作弊账号                     | fission_cheat_token              | 裂变作弊账号              | fission_cheat_token          | 裂变作弊账号       |
| marketing_cheating_token         | 营销作弊账号                     | rank_cheat_token                 | 刷榜作弊账号              | rank_cheat_token             | 刷榜作弊账号       |
| marketing_cheating_token         | 营销作弊账号                     | task_cheat_token                 | 任务作弊账号              | task_cheat_token             | 任务作弊账号       |
| marketing_cheating_token         | 营销作弊账号                     | seckill_cheat_token              | 机器秒杀作弊账号          | seckill_cheat_token          | 机器秒杀作弊账号   |
| marketing_cheating_token         | 营销作弊账号                     | risk_discount_token              | 薅优惠账号                | risk_discount_token          | 薅优惠账号         |
| marketing_cheating_token         | 营销作弊账号                     | consume_stock_token              | 占库存/占座账号           | consume_stock_token          | 占库存/占座账号    |
| data_stealing_token              | 数据盗爬账号                     | data_steal_token                 | 数据盗爬账号              | data_steal_token             | 数据盗爬场账号     |
| ad_scam_token                    | 诈骗导流账号                     | net_scam_token                   | 网络诈骗账号              | net_scam_token               | 网络诈骗账号       |
| ad_scam_token                    | 诈骗导流账号                     | user_digging_token               | 竞品挖人账号              | user_digging_token           | 竞品挖人账号       |
| ad_scam_token                    | 诈骗导流账号                     | ad_diversion_token               | 广告导流账号              | ad_diversion_token           | 广告导流账号       |
| risk_group_token                 | 高危团伙账号                     | risk_group_token                 | 高危团伙账号              | risk_group_token             | 高危团伙账号       |
| risk_content_token               | 风险内容账号                     | porn_token                       | 色情内容账号              | porn_token                   | 色情内容账号       |
| risk_content_token               | 风险内容账号                     | politics_token                   | 涉政内容账号              | politics_token               | 涉政内容账号       |
| other_risk_token                 | 其他可疑账号                     | monkey_token                     | 机器操控账号              | monkey_token                 | 机器操控账号       |
| other_risk_token                 | 其他可疑账号                     | high_frequency_token             | 异常高频账号              | high_frequency_token         | 异常高频账号       |
| other_risk_token                 | 其他可疑账号                     | abnormal_active_token            | 异常活跃账号              | abnormal_active_token        | 异常活跃账号       |
| other_risk_token                 | 其他可疑账号                     | discrete_region_token            | 地域离散账号              | discrete_region_token        | 地域离散账号       |
| other_risk_token                 | 其他可疑账号                     | abnormal_relation_token          | 异常关联账号              | abnormal_relation_token      | 异常关联账号       |

## <span id="eventIdList">事件列表</span>


| **行业** | **场景** | **事件** | **eventId** | **规范**              |
| ---------- | ---------- | ---------- | ------------- | ----------------------- |
| 通用     | 通用     | 注册     | register    | [参数详情](#register) |
| 通用     | 通用     | 登录     | login       | [参数详情](#login)    |

## <span id="data"> 事件详细API</span>

#### <span id="register">注册事件 </span>


| **参数名称**          | **类型** | **参数说明**                                                                  | **是否必传** | **规范**                                                                                                                               |
| ----------------------- | ---------- | ------------------------------------------------------------------------------- | -------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)     |          |                                                                               |              | 需要满足基础参数的配置要求                                                                                                             |
| type                  | string   | 注册方式： 包括手机号码一键注册、手机号验证码注册、第三方授权、用户名密码注册 | 必传字段     | 可选值：<br/>`phoneOnePass`:手机号一键注册、手机号验证码注册<br/>`signupPlatform`、第三方授权<br/>`userPassword`用户名密码注册         |
| hashPassword          | string   | 加密后的用户密码                                                              | 强烈建议     | 可选择任意一种加密方式进行加密，但必须确保同一密码加密后是唯一的且一致的。                                                             |
| isPhoneExist          | int      | 该手机号是否已经被注册                                                        | 强烈建议     | 可选值：`0`，`1`若注册方式为手机号注册，且该手机号已经被注册过，则传入`1`，否则传入`0`.                                                |
| guestId               | string   | 游客账号                                                                      | 强烈建议     | 在游客账号绑定成真实账号时，tokenId传入真实账号，guestId传入游客账号，长度限制在64个字符以内。                                         |
| nickName              | string   | 用户账户昵称                                                                  | 建议         |                                                                                                                                        |
| clickId               | string   | 点击id                                                                        | 强烈建议     | （渠道假量场景，关联渠道点击事件使用）<br/>腾讯平台：传入点击回调中的`click_id`即可<br/>巨量平台：传入点击回调中的`CALLBACK_PARAM`即可 |
| signupPlatform        | string   | 第三方注册平台，如果本平台直接注册，可以不传                                  | 建议         | 可选值：`qq、weibo、weixin、alipay、taobao、facebook、twitter `                                                                        |
| email                 | string   | 注册使用邮箱                                                                  | 建议         |                                                                                                                                        |
| sex                   | string   | 用户性别，没有则不传                                                          | 建议         | 可选值：`male`,`female`                                                                                                                |
| isSignupPlatformPhone | int      | 该手机号是否是第三方授权平台手机号                                            | 建议         | 可选值：`0`，`1`若手机号为第三方授权平台绑定的手机号，则传入`1`，否则传入`0`.                                                          |

#### <span id="login">登录事件 </span>


| **参数名称**      | **类型** | **参数说明**                                                                                                           | **是否必传** | **规范**                                                                                                                                                                                                                                       |
| ------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------ | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [基础参数](#data) |          |                                                                                                                        |              | 需要满足基础参数的配置要求                                                                                                                                                                                                                     |
| type              | string   | 登录方式，包括：本机号码一键登录、手机号密码登录、手机号验证码登录、用户名密码登录、生物识别（指纹、人脸、声音锁）登录 | 必传字段     | 可选值：<br/>`fastLogin`：快速登录<br/>`phoneOneLogin`：本机号码一键登录<br/>`phonePassword`：手机号密码登录<br/>`phoneMessage`：手机号验证码登录`signupPlatform`：第三方授权登录<br/>`userPassword`：用户名密码登录<br/>`biometric`：生物识别 |
| hashPassword      | string   | 加密后的用户密码                                                                                                       | 强烈建议     | 可选择任意一种加密方式进行加密，但必须确保同一密码加密后是唯一的且一致的。                                                                                                                                                                     |
| subTokenId        | string   | 账号的子账号                                                                                                           | 强烈建议     | 某些特殊的场景主账号有多个子账号（游戏场景不同区服）                                                                                                                                                                                           |
| roleId            | string   | 当前业务登录用户角色，游戏行业特殊字段                                                                                 | 强烈建议     |                                                                                                                                                                                                                                                |
| valid             | int      | 用户名密码验证结果                                                                                                     | 建议         | 可选值：<br/>`1`:成功<br/>`0`:失败                                                                                                                                                                                                             |

## <span id = "requestExample">示例：</span>

### <span id = "requestExp">请求示例：</span>

```json
{
  "accessKey": "XXXXXXXX",
  "appId": "default",
  "data": {
    "deviceId": "202202110150160d1404c60f8a645c49786a53435c6b64010242529c497de4",
    "ip": "87.119.224.144",
    "isTokenSeperate":0,
    "timestamp":1647570483887,
    "tokenId": "1157893898",
    "email":"iGa.mie.123+test@gmail.com",
    "phone":"18833221156",
    "nickName":"hhh"
  },
  "eventId": "register"
}
```

### <span id = "requestResponseExp">同步返回示例：</span>

```json
{
  "code": 1100,
  "message": "成功",
  "requestId": "4176ccb9803096b26b51e5d33e38838d",
  "riskLevel": "PASS",
  "score": 0,
  "tokenRiskLabels": [
    {
      "label1": "ad_scam_token",
      "label2": "ad_diversion_token",
      "label3": "ad_diversion_token",
      "description": "诈骗&引流账号:广告导流账号:广告导流账号",
      "timestamp": null
    },
    {
      "label1": "other_risk_token",
      "label2": "high_frequency_token",
      "label3": "high_frequency_token",
      "description": "其他可疑账号识别:异常高频账号:异常高频账号",
      "timestamp": null
    },
    {
      "label3": "abnormal_active_token",
      "description": "其他可疑账号识别:异常活跃账号:异常活跃账号",
      "timestamp": null,
      "label1": "other_risk_token",
      "label2": "abnormal_active_token"
    },
    {
      "timestamp": null,
      "label1": "other_risk_token",
      "label2": "discrete_region_token",
      "label3": "discrete_region_token",
      "description": "其他可疑账号识别:地域离散账号:地域离散账号"
    },
    {
      "label1": "other_risk_token",
      "label2": "abnormal_relation_token",
      "label3": "abnormal_relation_token",
      "description": "其他可疑账号识别:异常关联账号:异常关联账号",
      "timestamp": null
    },
    {
      "description": "其他可疑账号识别:机器操控账号:机器操控账号",
      "timestamp": null,
      "label1": "other_risk_token",
      "label2": "monkey_token",
      "label3": "monkey_token"
    },
    {
      "label3": "monkey_register_token",
      "description": "风险注册登录账号识别:机器注册账号:机器注册账号",
      "timestamp": null,
      "label1": "risk_register_login_token",
      "label2": "monkey_register_token"
    }
  ],
  "tokenProfileLabels": [],
  "detail": {
    "description": "正常",
    "model": "M1000"
  }
}
```

## <span id = "query">账号查询接口</span>

### <span id = "queryUrl">请求URL：</span>


| 集群         | URL                                                        | 支持产品列表 |
| -------------- | ------------------------------------------------------------ | -------------- |
| 北京集群     | `http://api-tianxiang-bj.fengkongcloud.com/tianxiang/v4`   | 风险查询     |
| 新加坡集群   | `http://api-tianxiang-xjp.fengkongcloud.com/tianxiang/v4`  | 风险查询     |
| 法兰克福集群 | `http://api-tianxiang-eur.fengkongcloud.com/tianxiang/v4`  | 风险查询     |
| 弗吉尼亚集群 | `http://api-tianxiang-fjny.fengkongcloud.com/tianxiang/v4` | 风险查询     |

### <span id = "queryMethod">请求方法：</span>

`POST`

### <span id = "queryEncode">字符编码：</span>

`UTF-8`

### <span id = "queryTimeout">建议超时时间：</span>

1s

### <span id = "queryParameters">请求参数：</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **请求参数名** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                        |
| ---------------- | ------------- | ------------------------------------------------------------------------------------------------------ | -------------- | ------------------------------------------------- |
| accessKey      | string      | 接口认证密钥<br/>用于权限认证，开通账号服务时由数美提供或使用开通邮箱登录数美后台右上角相关文档处查看 | 必传参数     | 数美分配                                        |
| data           | json_object | 请求的数据内容                                                                                       | 必传参数     | 请求的数据内容，最长10MB，[详见data参数](#data) |

<span id = "data">其中，data的内容如下：</span>


| **请求参数名** | **类型** | **参数说明**                                                                                                                                    | **是否必传** | **规范**                                                |
| ---------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | --------------------------------------------------------- |
| tokenId        | string   | 用户账号标识，建议使用贵司用户UID（可加密）自行生成 , 标识用户唯一身份用作灌水和广告等行为维度风控。如无用户uid的场景建议使用唯一的数据标识传值 | 不能为空     | 注意点：<br/>1. tokenId传入业务系统中的用户ID，务必保证接入数美全部事件相同用户传入的用户ID值一致且唯一<br/>2. 如果公司主体下存在多个应用且需要按应用区分账号，即相同用户ID在不同应用中代表不同用户。则建议在传入的用户ID之前拼接应用标识作为tokenId传入，达到区分账号体系的目的。<br/>3. 如果没有区分需求，则直接将用户ID传入tokenId字段即可<br/>4. 如果传入错误，会导致系统认为是不同账号，账号的行为无法关联，导致识别不准确 |

### <span id = "queryResponse">返回结果</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **参数名称**       | **参数类型** | **参数说明** | **是否必返** | **规范**                                                                                                                                                                                                    |
| -------------------- | -------------- | -------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code               | int          | 返回码       | 是           | `1100`：成功<br/>`1901`：QPS超限<br/>`1902`：参数不合法<br/>`1903`：服务失败<br/>`1911`：图片下载失败<br/>`9101`：无权限操作<br/>`3000`：运营商错误<br/>除message和requestId之外的字段，只有当code为1100时才会存在 |
| message            | string       | 返回码描述   | 是           | 和code对应：`成功 QPS超限 参数不合法 服务失败 余额不足 无权限操作`                                                                                                                                          |
| requestId          | string       | 请求标识     | 是           | 请求唯一标识，用于排查问题和后续效果优化，强烈建议保存                                                                                                                                                      |
| tokenLabels        | json_object  | 账号标签信息 | 否           | 见下面详情内容，仅在tokenId传入且服务开通时返回                                                                                                                                                             |
| tokenProfileLabels | json_array   | 账号属性标签 | 否           | 见下面详情内容，仅在tokenId传入且服务开通时返回                                                                                                                                                             |
| tokenRiskLabels    | json_array   | 账号风险标签 | 否           | 见下面详情内容，仅在tokenId传入且服务开通时返回                                                                                                                                                             |

其中

**1）tokenLabels的详情内容**


| ***返回结果参数名*** | ***参数类型*** | ***参数说明***   | ***规范***                 |
| ---------------------- | ---------------- | ------------------ | ---------------------------- |
| machine_account_risk | json_object    | 机器控制相关风险 |                            |
| UGC_account_risk     | json_object    | UGC内容相关风险  |                            |
| scene_account_risk   | json_object    | 场景账号风险     | 特殊场景才可取到，如航司等 |

machine_account_risk的详情内容如下：


| ***返回结果参数名***              | ***参数类型*** | ***参数说明*** | ***规范***                           |
| ----------------------------------- | ---------------- | ---------------- | -------------------------------------- |
| b_machine_control_tokenid         | int            | 机器账号       | `0`：非机器控制账号`1`：机器控制账号 |
| b_machine_control_tokenid_last_ts | int            | 机器账号时间   |                                      |
| b_offer_wall_tokenid              | int            | 积分墙账号     | `0`：非积分墙账号`1`：积分墙账号     |
| b_offer_wall_tokenid_last_ts      | int            | 积分墙账号时间 |                                      |

UGC_account_risk的详情内容如下：


| ***返回结果参数名***             | ***参数类型*** | ***参数说明*** | ***规范***                             |
| ---------------------------------- | ---------------- | ---------------- | ---------------------------------------- |
| b_politics_risk_tokenid          | int            | 涉政风险       | `0`：暂未发现涉政风险`1`：存在涉政风险 |
| b_politics_risk_tokenid_last_ts  | int            | 涉政风险时间   |                                        |
| b_sexy_risk_tokenid              | int            | 色情风险       | `0`：暂未发现色情风险`1`：存在色情风险 |
| b_sexy_risk_tokenid_last_ts      | int            | 色情风险时间   |                                        |
| b_advertise_risk_tokenid         | int            | 广告风险       | `0`：暂未发现广告风险`1`：存在广告风险 |
| b_advertise_risk_tokenid_last_ts | int            | 广告风险时间   |                                        |

scene_account_risk的详情内容如下：


| ***返回结果参数名***        | ***参数类型*** | ***参数说明*** | ***规范***                           |
| ----------------------------- | ---------------- | ---------------- | -------------------------------------- |
| i_tout_risk_tokenid         | int            | 航司占座账号   | `0`：非航司占座账号`1`：航司占座账号 |
| i_tout_risk_tokenid_last_ts | int            | 航司占座时间   |                                      |

其中标签类返回字段

***1***）tokenProfileLabels的详情内容


| ***返回结果参数名*** | ***参数类型*** | ***参数说明***         | ***规范***                   |
| ---------------------- | ---------------- | ------------------------ | ------------------------------ |
| label1               | string         | 一级标签               | 展示账号属性标签的一级标签。 |
| label2               | string         | 二级标签               | 展示账号属性标签的二级标签。 |
| label3               | string         | 三级标签               | 展示账号属性标签的三级标签。 |
| description          | string         | 风险描述               | 展示账号属性标签的中文描述。 |
| timestamp            | int64          | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail               | json_object    | 证据描述               | 证据细节                     |

***2***）tokenRiskLabels的详情内容


| ***返回结果参数名*** | ***参数类型*** | ***参数说明***         | ***规范***                   |
| ---------------------- | ---------------- | ------------------------ | ------------------------------ |
| label1               | string         | 一级标签               | 展示账号风险标签的一级标签。 |
| label2               | string         | 二级标签               | 展示账号风险标签的二级标签。 |
| label3               | string         | 三级标签               | 展示账号风险标签的三级标签。 |
| description          | string         | 风险描述               | 展示账号风险标签的中文描述。 |
| timestamp            | int64          | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail               | json_object    | 证据描述               | 证据细节                     |

## <span id = "queryExample">示例：</span>

### <span id = "queryRequestExp">请求示例：</span>

```json
{
  "accessKey": "xxxxxxxxxxxxxxxxxxxxxxxxx",
  "data": {
    "tokenId": "ceshitokenId"
  }
}
```

### <span id = "queryResponseExp">同步返回示例：</span>

```json
{
  "code": 1100,
  "message": "成功",
  "profileExist": 1,
  "requestId": "7a5445716f0581c2ab1d381a6af4d1b8",
  "tokenLabels": {
    "machine_account_risk": {
      "b_machine_control_tokenid": 1,
      "b_machine_control_tokenid_last_ts": 1587711321232,
      "b_offer_wall_tokenid": 1,
      "b_offer_wall_tokenid_last_ts": 1587711321232
    },
    "UGC_account_risk": {
      "b_politics_risk_tokenid": 1,
      "b_politics_risk_tokenid_last_ts": 1587711321232,
      "b_sexy_risk_tokenid": 1,
      "b_sexy_risk_tokenid_last_ts": 1587711321232,
      "b_advertise_risk_tokenid": 1,
      "b_advertise_risk_tokenid_last_ts": 1587711321232
    },
    "scene_account_risk": {
      "i_tout_risk_tokenid": 1,
      "i_tout_risk_tokenid_last_ts": 1587711321232
    },
    "account_active_info": {
      "i_tokenid_first_active_timestamp": 1587711321232,
      "i_tokenid_active_days_7d": 5,
      "i_tokenid_active_days_4w": 5
    },
    "account_freq_info": {
      "i_tokenid_login_cnt_1d": 5,
      "i_tokenid_login_cnt_7d": 5
    },
    "account_relate_info": {
      "i_tokenid_relate_smid_cnt_1d": 5,
      "i_tokenid_relate_smid_cnt_7d": 5,
      "i_tokenid_relate_ip_city_cnt_1d": 5,
      "i_tokenid_relate_ip_city_cnt_7d": 5
    },
    "account_common_info": {
      "s_tokenid_relate_smid_info_map_4w": [
        {
          "smid": "xxxx1",
          "days": "3"
        },
        {
          "smid": "xxxx2",
          "days": "5"
        },
        {
          "smid": "xxxx3",
          "days": "10"
        }
      ],
      "s_tokenid_relate_ip_city_info_map_4w": [
        {
          "city": "北京",
          "days": "3"
        },
        {
          "city": "长沙",
          "days": "5"
        },
        {
          "city": "武汉",
          "days": "10"
        }
      ]
    }
  },
  "tokenProfileLabels": [
    {
      "label1": "age_gender",
      "lable2": "token_age",
      "label3": "minor_token",
      "description": "年龄性别:年龄:未成年人",
      "timestamp": 1634732525000,
      "detail": {
      }
    }
  ],
  "tokenRiskLabels": [
    {
      "label1": "risk_device_token",
      "label2": "b_cloud_token_device",
      "label3": "b_cloud_token_device",
      "description": "风险设备账号:云手机账号:云手机账号",
      "timestamp": 1634732525000,
      "detail": {
      }
    },
    {
      "label1": "risk_device_token",
      "label2": "b_hook_token",
      "label3": "b_hook_token",
      "description": "风险设备账号:hook设备:hook设备",
      "timestamp": 1634732525000,
      "detail": {
      }
    }
  ]
}
```

## <span id = "text">文本接口</span>

### <span id = "textUrl">请求URL：</span>


| 集群             | URL                                              | 支持产品列表 |
| ------------------ | -------------------------------------------------- | -------------- |
| 北京             | `http://api-text-bj.fengkongcloud.com/text/v4`   | 诈骗导流识别 |
| 上海             | `http://api-text-sh.fengkongcloud.com/text/v4`   | 诈骗导流识别 |
| 广州             | `http://api-text-gz.fengkongcloud.com/text/v4`   | 诈骗导流识别 |
| 美国（弗吉尼亚） | `http://api-text-fjny.fengkongcloud.com/text/v4` | 诈骗导流识别 |
| 新加坡           | `http://api-text-xjp.fengkongcloud.com/text/v4`  | 诈骗导流识别 |

### <span id = "textMethod">请求方法：</span>

`POST`

### <span id = "textEncode">字符编码：</span>

`UTF-8`

### <span id = "textTimeout">建议超时时间：</span>

1s

### <span id = "textParameters">请求参数：</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **请求参数名** | **类型**    | **参数说明**   | **是否必传** | **规范**                                                                                                                                                                                                        |
| ---------------- | ------------- | ---------------- | -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| accessKey      | string      | 接口认证密钥   | 是           | 由数美提供                                                                                                                                                                                                      |
| appId          | string      | 应用标识       | 是           | 用于区分应用，可选值如下：`default`：默认应用<br/>额外应用值需数美单独分配提供。<br/>当公司app存在多个马甲包，分下面两种情况：<br/>1. 马甲包账号互通，不同马甲包数据传入不同的appId，tokenId保持一致<br/>2. 马甲包账号独立，不同马甲包数据传入不同的appId，tokenId必须不同                                                                                                                                     |
| eventId        | string      | 事件标识       | 是           | 可选值如下：额外事件值需数美单独分配提供                                                                                                                                                                        |
| type           | string      | 检测的风险类型 | 是           | 可选值：`DEFAULT` ：默认值（包含：涉政、暴恐、违禁、色情、辱骂、广告、灌水、无意义、隐私、广告法、黑名单）<br/>`FRUAD` ：网络诈骗<br/>`UNPOACH`：高价值用户防挖<br/>以上type可以下划线组合，如：`DEFAULT_FRUAD` |
| data           | json_object | 请求的数据内容 | 是           | 最长1MB，详见data参数                                                                                                                                                                                           |
| businessType   | string      | 检测的业务类型 | 否           | 可选值：`MINOR`：未成年人                                                                                                                                                                                       |

其中，data的内容如下：


| **请求参数名** | **类型**    | **参数说明**                                                                                                                                       | **是否必传** | **规范**                                                                                                          |
| ---------------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------- |
| text           | string      | 需要检测的文本（200字内效果最佳）                                                                                                                  | 是           | 文本字数上限2000字，若传递nickname字段，则会同时校验文本+昵称内容。注意：有超过2000字以上文本内容建议联系数美协商 |
| tokenId        | string      | 用用户账号标识， 建议使用贵司用户UID（可加密）自行生成 , 标识用户唯一身份用作灌水和广告等行为维度风控。如无用户uid的场景建议使用唯一的数据标识传值 | 是           | 注意点：<br/>1. tokenId传入业务系统中的用户ID，务必保证接入数美全部事件相同用户传入的用户ID值一致且唯一<br/>2. 如果公司主体下存在多个应用且需要按应用区分账号，即相同用户ID在不同应用中代表不同用户。则建议在传入的用户ID之前拼接应用标识作为tokenId传入，达到区分账号体系的目的。 <br/>3. 如果没有区分需求，则直接将用户ID传入tokenId字段即可<br/>4. 如果传入错误，会导致系统认为是不同账号，账号的行为无法关联，导致识别不准确                                                          |
| nickname       | string      | 用户昵称                                                                                                                                           | 否           | 校验昵称内容风险                                                                                                  |
| ip             | string      | ip地址                                                                                                                                             | 否           | 发送该文本的的用户公网ipv4地址                                                                                    |
| deviceId       | string      | 数美设备标识                                                                                                                                       | 否           | 数美设备指纹生成的设备唯一标识                                                                                    |
| extra          | json_object | 辅助参数                                                                                                                                           | 否           | 用于辅助文本检测的相关信息，详见extra参数                                                                         |

data 中 extra数组每个元素的内容如下：


| **请求参数名**  | **类型** | **参数说明**                                                                                  | **是否必传** | 规范                                                                                                                                                                                                                                                                                             |
| ----------------- | ---------- | ----------------------------------------------------------------------------------------------- | -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| receiveTokenId  | string   | 消息接收者的tokenIdeventId值为 message 时必传                                                 | 否           | 由数字、字母、下划线、短杠组成的长度小于等于64位的字符串                                                                                                                                                                                                                                         |
| topic           | string   | 可为话题编号、书评区编号、论坛帖子编号eventId值为 article 必传                                | 否           |                                                                                                                                                                                                                                                                                                  |
| atId            | string   | eventId值为 groupChat 必传用户在公开场景可以相互@，该参数用于传入被@用户的tokenId             | 否           | 由数字、字母、下划线、短杠组成的长度小于等于64位的字符串                                                                                                                                                                                                                                         |
| room            | string   | 直播间/游戏房间编号eventId值为 groupChat 时必传                                               | 否           |                                                                                                                                                                                                                                                                                                  |
| level           | int      | 用户等级                                                                                      | 否           | 可选值：<br/>`0`：最低级用户，典型如新注册、完全不活跃或等级为0的用户等;<br/>`1`：较低级用户，典型如低活跃或低等级用户等；<br/>`2`：中等级用户，典型如具备一定活跃或等级中等的用户等；<br/>`3`：较高级用户，典型如高活跃或高等级用户等；<br/>`4`：最高级用户，典型如付费用户、VIP用户等 可选值： |
| role            | string   | 用户角色                                                                                      | 否           | 用于区分直播／游戏行业不同角色的用户，可选值（默认为普通用户）：<br/> `ADMIN` ：房管／管理员<br/>`HOST` ：主播<br/>`SYSTEM` ：系统<br/>`USER` ：普通用户                                                                                                                                         |
| sex             | int      | 性别                                                                                          | 否           | 用于用户性别;<br/>可选值： `0`：男性、`1`：女性、`2`：性别不明                                                                                                                                                                                                                                   |
| passThrough     | Json     | 透传字段                                                                                      | 否           | 该字段内容会随着返回值一起返回                                                                                                                                                                                                                                                                   |

### <span id = "textResponse">返回结果：</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **返回结果参数名**     | **参数类型** | **参数说明** | **是否必返** | **规范**                                                                                 |
| ------------------------ | -------------- | -------------- | -------------- | ------------------------------------------------------------------------------------------ |
| code                   | int          | 返回码       | 是           | 1100：成功1901：QPS超限1902：参数不合法1903：服务失败9100：余额不足9101：无权限操作      |
| message                | string       | 返回码描述   | 是           | 和code对应：成功QPS超限参数不合法服务失败余额不足无权限操作                              |
| requestId              | string       | 请求标识     | 是           | 本次请求数据的唯一标识,用于问题排查和效果优化，强烈建议保存                              |
| riskLevel              | string       | 处置建议     | 是           | 可能返回值：PASS：正常，建议直接放行REVIEW：可疑，建议人工审核REJECT：违规，建议直接拦截 |
| riskLabel1             | string       | 一级风险标签 | 是           | 一级风险标签，当riskLevel为PASS时返回normal                                              |
| riskLabel2             | string       | 二级风险标签 | 是           | 二级风险标签，当riskLevel为PASS时为空                                                    |
| riskLabel3             | string       | 三级风险标签 | 是           | 三级风险标签，当riskLevel为PASS时为空                                                    |
| riskDescription        | string       | 风险原因     | 是           | 当riskLevel为PASS时为"正常"                                                              |
| riskDetail             | json_object  | 风险详情     | 是           | 风险详情，详见riskDetail参数                                                             |
| tokenLabels            | json object  | 辅助信息     | 是           | 账号风险画像标签信息见下面详情内容。详见tokenLabels参数                                  |
| auxInfo                | json_object  | 辅助信息     | 是           | 详见auxlnfo参数                                                                          |
| allLabels              | json_array   | 辅助信息     | 是           | 命中的所有风险标签以及详情信息。详见allLabels参数                                        |
| businessLabels         | Json_array   | 辅助信息     | 是           | 命中的所有业务标签以及详细信息。详见businessLabels参数                                   |
| **tokenProfileLabels** | json_array   | 辅助信息     | 否           | 属性账号类标签。详见账号标签参数                                                         |
| **tokenRiskLabels**    | json_array   | 辅助信息     | 否           | 风险账号类标签。详见账号标签参数                                                         |

其中auxInfo字段如下：


| **参数名称**  | **类型**    | **参数说明** | **是否必返** | **规范**                                                                                         |
| --------------- | ------------- | -------------- | -------------- | -------------------------------------------------------------------------------------------------- |
| filteredText  | string      | 辅助信息     | 否           | 敏感词被替换为*后的文本（该参数仅在命中敏感词时存在）<br/>语境模型，联系方式相关风险不返回该字段 |
| passThrough   | json_object | 透传字段     | 否           | 该字段内容与请求参数data中extra的passThrough的值相同。                                           |
| contactResult | json_array  | 辅助信息     | 否           | 联系方式识别结果，包含识别出的微信、微博、QQ、手机号的字符串类型和内容。 详见contactResult参数   |

auxInfo中，contactResult数组每个元素的内容如下：


| **参数名称**  | **类型** | **参数说明** | **是否必返** | **规范**                                                                                     |
| --------------- | ---------- | -------------- | -------------- | ---------------------------------------------------------------------------------------------- |
| contactType   | int      | 辅助信息     | 否           | 联系方式类型，可选值区间【0-3】，详情如下：0: 手机号<br/>1: QQ号<br/>2: 微信号<br/>3: 微博号 |
| contactString | string   | 辅助信息     | 否           | 联系方式串                                                                                   |

其中，riskDetail的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明**                                                                     | **是否必返** | **备注**                                        |
| -------------------- | -------------- | ---------------------------------------------------------------------------------- | -------------- | ------------------------------------------------- |
| matchedLists       | json_array   | 辅助信息                                                                         | 否           | 命中的客户自定义名单列表。详 见matchedLists参数 |
| riskSegments       | json_array   | 辅助信息，高风险内容片段检测文本包含涉政、暴恐、违禁、广告法等风险内容的时候存在 | 否           | 详见riskSegments参 数                           |

riskDetail中，matchedLists数组每个元素的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明** | **是否必返** | **规范**                        |
| -------------------- | -------------- | -------------- | -------------- | --------------------------------- |
| name               | string       | 辅助信息     | 否           | 命中的名单名称                  |
| words              | json_array   | 辅助信息     | 否           | 命中的敏感词数组。详见words参数 |

matchedLists中，words数组每个元素的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明** | **是否必返** | **规范**       |
| -------------------- | -------------- | -------------- | -------------- | ---------------- |
| word               | string       | 辅助信息     | 否           | 命中的敏感词   |
| position           | int_array    | 辅助信息     | 否           | 敏感词所在位置 |

riskDetail中，riskSegments的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明** | **是否必返** | **规范**               |
| -------------------- | -------------- | -------------- | -------------- | ------------------------ |
| segment            | string       | 辅助信息     | 否           | 高风险内容片段         |
| position           | int_array    | 辅助信息     | 否           | 高风险内容片段所在位置 |

其中，tokenLabels的详情内容：


| **返回结果参数名** | **参数类型** | **参数说明** | **是否必返** | **规范**                                  |
| -------------------- | -------------- | -------------- | -------------- | ------------------------------------------- |
| UGC_account_risk   | json_object  | 辅助信息     | 否           | UGC内容相关风险。详见UGC_account_risk参数 |

tokenLabels中，UGC_account_risk的详情内容如下：


| **返回结果参数名** | **参数类型** | **参数说明** | **是否必返** | **规范**                    |
| -------------------- | -------------- | -------------- | -------------- | ----------------------------- |
| sexy_risk_tokenid  | float        | 辅助信息     | 否           | 色情账号风险分取值区间[0-1] |

其中，allLabels的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明**          | **是否必返** | **规范**                                                             |
| -------------------- | -------------- | ----------------------- | -------------- | ---------------------------------------------------------------------- |
| riskLabel1         | string       | allLabels不为空时必返 | 是           | 一级风险标签                                                         |
| riskLabel2         | string       | allLabels不为空时必返 | 是           | 二级风险标签                                                         |
| riskLabel3         | string       | allLabels不为空时必返 | 是           | 三级风险标签                                                         |
| riskDescription    | string       | allLabels不为空时必返 | 是           | 风险原因                                                             |
| probability        | float        | 置信度                | 是           | 可选值在0～1之间，值越大，可信度越高<br/>注意：allLabels不为空时必返 |
| riskDetail         | json_object  | 风险详情              | 是           | 格式与上层riskDetail结构相同<br/>注意：allLabels不为空时必返         |
| riskLevel          | string       | 风险等级              | 是           | 取值：REJECT 违规REVIEW 可疑                                         |

其中，businessLabels的内容如下：


| **返回结果参数名**  | **参数类型** | **参数说明**                                                   | **是否必返** | **规范**                   |
| --------------------- | -------------- | ---------------------------------------------------------------- | -------------- | ---------------------------- |
| businessLabel1      | string       | businessLabels不为空时必返                                     | 是           | 一级标签                   |
| businessLabel2      | string       | businessLabels不为空时必返                                     | 是           | 二级标签                   |
| businessLabel3      | string       | businessLabels不为空时必返                                     | 是           | 三级标签                   |
| businessDescription | string       | businessLabels不为空时必返                                     | 是           | 标签描述                   |
| probability         | float        | businessLabels不为空时必返可选值在0～1之间，值越大，可信度越高 | 是           | 置信度                     |
| businessDetail      | Json_object  | 业务详情                                                       | 是           | businessLabels不为空时必返 |

其中，tokenProfileLabels、tokenRiskLabels的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明** | **是否必返** | **规范**                   |
| -------------------- | -------------- | -------------- | -------------- | ---------------------------- |
| label1             | string       | 一级标签     | 否           |                            |
| label2             | string       | 二级标签     | 否           |                            |
| label3             | string       | 三级标签     | 否           |                            |
| description        | string       | 标签描述     | 否           |                            |
| timestamp          | Int          | 打标签时间戳 | 否           | 13位Unix时间戳，单位：毫秒 |

一级标签的内容如下：


| **一级标签** | **一级标识** | **类型** | **规范**               |
| -------------- | -------------- | ---------- | ------------------------ |
| 涉政         | politics     | 监管标签 | type值为DEFAULT        |
| 暴恐         | violence     | 监管标签 | type值为DEFAULT        |
| 色情         | porn         | 监管标签 | type值为DEFAULT        |
| 违禁         | ban          | 监管标签 | type值为DEFAULT        |
| 辱骂         | abuse        | 监管标签 | type值为DEFAULT        |
| 广告法       | ad_law       | 监管标签 | type值为DEFAULT        |
| 广告         | ad           | 监管标签 | type值为DEFAULT        |
| 黑名单       | blacklist    | 监管标签 | type值为DEFAULT        |
| 无意义       | meaningless  | 监管标签 | type值为DEFAULT        |
| 隐私         | privacy      | 监管标签 | type值为DEFAULT        |
| 网络诈骗     | fraud        | 监管标签 | type值为FRUAD、UNPOACH |
| 未成年人     | minor        | 业务标签 | businessType值为MINOR  |

## <span id="textExample" > 示例 </span>

### <span id ="textExp" >请求示例</span>

```json
{
    "accessKey":"*************",
    "appId":"default",
    "eventId":"text",
    "type":"DEFAULT",
    "businessType":"MINOR",
    "data":
    {
        "text":"我12岁了，你呢，我要去天安门看毛主席照片",
        "tokenId":"4567898765jhgfdsa",
        "ip":"118.89.214.89",
        "deviceId":"*************",
        "nickname":"***********",
        "extra":
        {
            "topic":"12345",
            "atId":"username1",
            "room":"ceshi123",
            "receiveTokenId":"username2",
            "level":1,
            "role":"ADMIN"
    	}
    }   
}

```

### <span id="textResponseExp"> 返回示例</span>

```json
{
  "code":1100,
  "message":"成功",
  "requestId":"cfd98ce4510efd74e3a5182d2b752ee9",
  "riskLevel":"REJECT",
  "riskLabel1":"politics",
  "riskLabel2":"shezheng",
  "riskLabel3":"shezheng",
  "riskDescription":"涉政:涉政:涉政",
  "riskDetail":{

  },
  "allLabels":[
    {
      "probability":1,
      "riskDescription":"涉政:国内领导人:历任国级领导",
      "riskDetail":{
        "riskSegments":[
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"毛主席"
          },
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"毛主席"
          }
        ]
      },
      "riskLabel1":"politics",
      "riskLabel2":"guoneilingdaoren",
      "riskLabel3":"lirenguojilingdao",
      "riskLevel":"REJECT"
    },
    {
      "probability":1,
      "riskDescription":"涉政:涉政:涉政",
      "riskDetail":{
        "riskSegments":[
          {
            "position":[
              12,
              13,
              14
            ],
            "segment":"天安门"
          },
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"毛主席"
          }
        ]
      },
      "riskLabel1":"politics",
      "riskLabel2":"shezheng",
      "riskLabel3":"shezheng",
      "riskLevel":"REJECT"
    },
    {
      "probability":1,
      "riskDescription":"涉政:核心领导:毛泽东",
      "riskDetail":{
        "riskSegments":[
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"毛猪稀"
          },
          {
            "position":[
              16,
              17,
              18,
              16,
              17,
              18
            ],
            "segment":"毛猪西"
          },
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"猫主席"
          },
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"猫朱熹"
          },
          {
            "position":[
              16,
              17,
              18
            ],
            "segment":"毛主席"
          }
        ]
      },
      "riskLabel1":"politics",
      "riskLabel2":"hexinlingdao",
      "riskLabel3":"maozedong",
      "riskLevel":"REJECT"
    }
  ],
  "auxInfo":{
    "contactResult":[
      {
        "contactString":"你呢",
        "contactType":3
      }
    ],
    "filteredText":"我12岁了，你呢，我要去***看***照片"
  },
  "businessLabels":[
    {
      "businessDescription":"未成年人:未成年人:未成年人",
      "businessLabel1":"minor",
      "businessLabel2":"minor",
      "businessLabel3":"clear",
      "businessDetail":{},
      "probability":1
    }
  ]
}


```
