# 数美天网-交易风控

---

版权所有 翻版必究

---


[交易风控](#riskDiscernInterface)
+ [事件接口](#requestInterface)
    + [接口定义](#requestInterface)
        - [请求URL](#requestUrl)
        - [字符编码格式](#requestEncode)
        - [请求方法](#requestMethod)
        - [建议超时时长](#requestTimeout)
        - [请求参数](#requestParameters)
        - [返回结果](#response)
    + [事件列表](#eventIdList)
    + [事件详细API](#data)
    + [示例](#requestExample)
        - [请求示例](#requestExp)
        - [返回示例](#requestResponseExp)
+ [查询接口](#query)
    + [接口定义](#query)
        - [请求URL](#queryUrl)
        - [字符编码格式](#queryEncode)
        - [请求方法](#queryMethod)
        - [建议超时时长](#queryTimeout)
        - [请求参数](#queryParameters)
        - [返回结果](#queryResponse)
    + [示例](#queryExample)
        - [请求示例](#queryExp)
        - [返回示例](#queryResponseExp)

# <span id = "riskDiscernInterface">交易风控</span>



## <span id = "requestInterface">事件接口</span>

### <span id = "requestUrl">请求URL：</span>


| 集群             | URL                                                 | 支持产品列表 |
| ------------------ | ----------------------------------------------------- | -------------- |
| 北京             | `http://api-skynet-bj.fengkongcloud.com/v4/event`   | 天网风险识别 |
| 美国（弗吉尼亚） | `http://api-skynet-fjny.fengkongcloud.com/v4/event` | 天网风险识别 |
| 新加坡           | `http://api-skynet-xjp.fengkongcloud.com/v4/event`  | 天网风险识别 |
| 欧洲（法兰克福） | `http://api-skynet-eur.fengkongcloud.com/v4/event`  | 天网风险识别 |

### <span id = "requestMethod">请求方法：</span>

`POST`

### <span id = "requestEncode">字符编码：</span>

`UTF-8`

### <span id = "requestTimeout">建议超时时间：</span>

1s

### <span id = "requestParameters">请求参数：</span>

请求body = 通用请求参数 +  事件特有参数 （放在data字段下）

#### 通用的请求参数
放在HTTP Body中，采用Json格式，具体参数如下：


| 请求参数名 | 类型    | 参数说明                                                                                         | 是否必传 | 规范                                                                                     |
| ---------------- | ------------- | ------------------------------------------------------------------------------------------------------ | -------------- | ---------------------------------------------------------------------------------------------- |
| accessKey      | string      | 接口认证密钥<br/>用于权限认证，开通账号服务时由数美提供或使用开通邮箱登录数美后台右上角相关文档处查看 | 必传参数     | 数美分配                                                                                     |
| appId          | string      | 应用ID，用于区分相同公司的不同应用                                                                   | 必传参数     | 该参数传递值可与数美协商。<br/>当公司app存在多个马甲包，分下面两种情况：<br/>1. 马甲包账号互通，不同马甲包数据传入不同的appId，tokenId保持一致<br/>2. 马甲包账号独立，不同马甲包数据传入不同的appId，tokenId必须不同                                                                     |
| eventId        | string      | 事件ID，用于标识事件类型。                                                                           | 必传参数     | 不同的事件对应不同的策略，不同的事件输入参数可能会有细微的差别，请对应按照各事件详细传参说明 |
| data           | json_object | 请求的数据内容                                                                                       | 必传参数     | 请求的数据内容，最长10MB，[详见data参数](#data)                                              |

<span id = "data">其中，data的内容如下：</span>


| 请求参数名  | 类型 | 参数说明                                                                                                                                    | 是否必传 | 规范                                                                                                                                                                                                                            |
| ----------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| tokenId         | string   | 用户账号标识，建议使用贵司用户UID（可加密）自行生成 , 标识用户唯一身份用作灌水和广告等行为维度风控。如无用户uid的场景建议使用唯一的数据标识传值 | 必传参数 | 注意点：<br/>1. tokenId传入业务系统中的用户ID，务必保证接入数美全部事件相同用户传入的用户ID值一致且唯一<br/>2. 如果公司主体下存在多个应用且需要按应用区分账号，即相同用户ID在不同应用中代表不同用户。则建议在传入的用户ID之前拼接应用标识作为tokenId传入，达到区分账号体系的目的。 <br/>3. 如果没有区分需求，则直接将用户ID传入tokenId字段即可<br/>4. 如果传入错误，会导致系统认为是不同账号，账号的行为无法关联，导致识别不准确                                                                                                                                                                             |
| ip              | string   | 当前业务事件发生时的客户端公网ipv4地址                                                                                                          | 必传参数     | 非内网ip                                                                                                                                                                                                                            |
| timestamp       | int64    | 当前业务事件发生时的时间戳，单位为毫秒（ms）                                                                                                    | 必传参数     |                                                                                                                                                                                                                                     |
| deviceId        | string   | 数美设备指纹标识，由数美SDK生成                                                                                                                 | 强烈建议     | 数美设备指纹标识，用于用户行为分析。<br/>注：<br/>1. 接入数美SDK前的版本，无法获取到deviceId的情况下，deviceId传空“”即可；                                                          <br/>     2. 直接传输getDeviceId获取到的原始字段，不需要解密 |
| os              | string   | 应用端操作系统类型                                                                                                                              | 强烈建议     | 可选值：`android、ios、weapp、web`                                                                                                                                                                                                    |
| appVersion      | string   | 应用版本号                                                                                                                                      | 强烈建议     | 传入当前应用或服务正在使用的版本号，格式为3个点4段数字，每段数字最多4位，例如`3.2.1.1234`。不足4段的请补0，例如`2.1.5`传入`2.1.5.0`。多于4段的取前4段，例如`2.1.5.1.1`传入`2.1.5.1`。                                                         |
| activityId      | string   | 营销活动id                                                                                                                                      | 建议         | 建议传入对应营销活动标识id                                                                                                                                                                                                          |
| userAgent           | string   | 用户代理                                                                                                                                          | 强烈建议     |                                                                                                                                                                                                                                                                                                                  |
| phone           | string   | 手机号                                                                                                                                          | 建议         |                                                                                                                                                                                                                                     |
| phoneMd5        | string   | 手机号的phoneMd5加密串                                                                                                                          | 建议         |                                                                                                                                                                                                                                     |
| phoneSha256     | string   | 手机号的Sha256加密串                                                                                                                            | 建议         |                                                                                                                                                                                                                                     |
|role|string|角色|强烈建议|可选值(强校验取值只能为空、`ADMIN`、`HOST`)；`HOST`代表主播，针对主播，将会放开多开、PC模拟器规则以及关联频度策略阈值，以保证主播的正常体验和使用。|
| level        | int     | 用户等级，针对不同等级的用户可配置不同拦截策略    | 强烈建议 | 可选值：`0,1,2,3,4`分别对应：<br/>`0`：最低级用户，典型如新注册、完全不活跃或等级为0的用户等<br/>`1`：较低级用户，典型如低活跃或低等级用户等<br/>`2`：中等级用户，典型如具备一定活跃或等级中等的用户等<br/>`3`：较高级用户，典型如高活跃或高等级用户等4：最高级用户，典型如付费用户、VIP用户、可考虑放过的用户等 |
| vdata           | json     | 微行为数据传入字段                                                                                                                              | 建议         |                                                                                                                                                                                                                                     |
| extra           | json     | 用户自定义数据                                                                                                                                  | 建议         | 如无必要，不传                                                                                                                                                                                                                      |
| passThrough     | json     | 用户自定义透传字段                                                                                                                              | 建议         | 如无必要，不传                                                                                                                                                                                                                      |
### <span id = "response">返回结果</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必返** | **规范**                                                                                     |
| -------------------- | -------------- | -------------------------- | -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code               | int          | 返回码                   | 是           | `1100`：成功<br/>`1901`：QPS超限<br/>`1902`：参数不合法<br/>`1903`：服务失败<br/>`1911`：图片下载失败<br/>`9101`：无权限操作<br/>`3000`：运营商错误<br/>除message和requestId之外的字段，只有当code为1100时才会存在 |
| message            | string       | 返回码描述               | 是           | 和code对应：`成功 QPS超限 参数不合法 服务失败 余额不足 无权限操作`                                                                                                                                                 |
| requestId          | string       | 请求标识                 | 是           | 请求唯一标识，用于排查问题和后续效果优化，强烈建议保存                                                                                                                                                             |
| riskevel           | string       | 当前事件的处置建议       | 是           | `PASS`：通过<br/>`REVIEW`：审核<br/>`REJECT`：拒绝<br/> `VERIFY`:验证                                                                                                                                            |
| detail             | json_object  | 风险详情信息，详情见下文 | 是           | 请见《detail结果详情》表                                                                                                                                                                                           |
| tokenProfileLabels | json_array   | 账号属性标签             | 否           | 见下面详情内容，仅在服务开通时返回                                                                                                                                                                                 |
| tokenRiskLabels    | json_array   | 账号风险标签             | 否           | 见下面详情内容，仅在服务开通时返回                                                                                                                                                                                 |

其中

1）detail结果的详情内容


| **返回结果参数名** | **参数类型** | **参数说明**         | **规范**                   |
| -------------------- | -------------- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| description        | string       | 当前事件的风险描述                       |                                                                                                                                                                                                           |
| model              | string       | 规则标识，命中的最高优先级规则标识       |                                                                                                                                                                                                           |
| hits               | Json array   | 事件命中的所有规则标识                   | hits中每个字段都是一个object，详见《hits结果详情信息》                                                                                                                                                    |
| ip_country         | string       | ip归属地国家                             |                                                                                                                                                                                                           |
| ip_province        | string       | ip归属地省份                             |                                                                                                                                                                                                           |
| ip_city            | string       | ip归属地城市                             |                                                                                                                                                                                                           |
| verifyType         | string       | 当处置建议为`VERIFY`时，返回`verifyType` | `UPSMS`：上行短信验证码<br/>`DOWNSMS`：下行短信验证码<br/>`CAPTCHA`：验证码（点选或滑动等）<br/>`SEQUENCE`：语序验证（点选或输入）<br/>`SPATIAL`：空间逻辑推理<br/>`FACE`：人脸检测<br/>`DELAY`：延时交易 |
| machineAccountRisk            | json       | 账号历史打黑信息                             | 只有当前账号历史被打入账号黑库后，账号的相关流水才会返回该结构体       |   

其中，hits结果详情的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明**         | **规范**                   |
| -------------------- | -------------- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| description        | string       | 当前事件的风险描述                       |                                                                                                                                                                                                           |
| model              | string       | 规则标识                                 |                                                                                                                                                                                                           |
| riskLevel          | string       | 当前事件的处置建议                       | `PASS`：通过<br/>`REVIEW`：审核<br/>`REJECT`：拒绝<br/>`VERIFY`:验证                                                                                                                                      |
| verifyType         | string       | 当处置建议为`VERIFY`时，返回`verifyType` | `UPSMS`：上行短信验证码<br/>`DOWNSMS`：下行短信验证码<br/>`CAPTCHA`：验证码（点选或滑动等）<br/>`SEQUENCE`：语序验证（点选或输入）<br/>`SPATIAL`：空间逻辑推理<br/>`FACE`：人脸检测<br/>`DELAY`：延时交易 |

其中，machineAccountRisk详情的内容如下：


| **返回结果参数名** | **参数类型** | **参数说明**         | **规范**                   |
| -------------------- | -------------- | ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| tokenSampleLastTs        | int       | 最近打黑时间，毫秒级                       |  如："tokenSampleLastTs": 1683026613000                                                                                                                                                                                                         |
| tokenSampleDesc              | string       | 历史打黑策略的description                                 |  如："tokenSampleDesc": "高风险设备：IP异常聚集"                                                                                                                                                                                                         |

其中标签类返回字段

1）tokenProfileLabels的详情内容


| **返回结果参数名** | **参数类型** | **参数说明**         | **规范**                   |
| ---------------------- | ---------------- | ------------------------ | ------------------------------ |
| label1               | string         | 一级标签               | 展示账号属性标签的一级标签。 |
| label2               | string         | 二级标签               | 展示账号属性标签的二级标签。 |
| label3               | string         | 三级标签               | 展示账号属性标签的三级标签。 |
| description          | string         | 风险描述               | 展示账号属性标签的中文描述。 |
| timestamp            | int64          | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail               | json_object    | 证据描述               | 证据细节                     |

2）tokenRiskLabels的详情内容


| **返回结果参数名** | **参数类型** | **参数说明**         | **规范**                   |
| ---------------------- | ---------------- | ------------------------ | ------------------------------ |
| label1               | string         | 一级标签               | 展示账号风险标签的一级标签。 |
| label2               | string         | 二级标签               | 展示账号风险标签的二级标签。 |
| label3               | string         | 三级标签               | 展示账号风险标签的三级标签。 |
| description          | string         | 风险描述               | 展示账号风险标签的中文描述。 |
| timestamp            | int64          | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail               | json_object    | 证据描述               | 证据细节                     |

## <span id="eventIdList">事件列表</span>


 |**事件**     | **eventId**   | **规范**                   |
| -------------------- | ------------------- | -------------------------------- |
| 下虚拟商品订单     | virtualOrder      | [参数详情](#virtualOrder)      |
| 完成订单           | finishOrder       | [参数详情](#finishOrder)       |
| 支付               | payment           | [参数详情](#addCard)           |
| 绑卡               | addCard           | [参数详情](#addCard)           |
| 交易结果           | notify            | [参数详情](#notify)            |
| 转账               | transfer          | [参数详情](#transfer)          |
| 实名认证           | identityVerify    | [参数详情](#identityVerify)    |
| 存入               | deposit           | [参数详情](#deposit)           |
| 销户               | cancelAccount     | [参数详情](#cancelAccount)     |
| 应用内购买退款申请 | refundApplication | [参数详情](#refundApplication) |
| 应用内购买退款成功 | refundSuccess     | [参数详情](#refundSuccess)     |
| 争议               | dispute           | [参数详情](#dispute)           |
| 拒付               | chargeback        | [参数详情](#chargeback)        |
| 开户               | openAccount       | [参数详情](#openAccount)       |

##  <span id="data"> 事件详细API</span>


#### <span id="virtualOrder"> 下虚拟商品订单 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------------ | ------------- | ------------------------------------------------------- | -------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| product      | string  | 虚拟商品名称                                      | 必传参数 | 例如：金币、道具、会员等机票（航班号+“-”+日期，CA288-20180101）                                                                                                                                                                                                           |
| orderId      | string  | 订单ID                                            | 强烈建议 | 该商品订单唯一标识                                                                                                                                                                                                                                                                      |
| interval     | int64   | 商品发布到下单时间，单位毫秒（ms）                | 强烈建议 | 主要用于商品秒杀                                                                                                                                                                                                                                                                        |
| price        | float64 | 下单总金额（优惠前）                              | 强烈建议 | 货币计量单位为中国大陆法定货币人民币（CNY），单位：元例如：88.69                                                                                                                                                                                                            |
| discount     | float64 | 该订单享受的优惠金额                              | 强烈建议 | 商品订单原价–商品订单实际支付的价格                                                                                                                                                                                                                                                |
| account      | float64 | 购买商品后账户余额                                | 强烈建议 | 购买金币、Q币等虚拟商品后账户余额（增加），单位：元，例如：10.5                                                                                                                                                                                                                     |
| groupId      | string  | 拼团的团ID                                        | 建议     | 用户自定义唯一标识                                                                                                                                                                                                                                                                      |
| discountType | string   | 优惠来源                                          | 建议     |  可选值：<br/> `NEW_USER`:新用户优惠<br/>`REWARD_TASK`:奖励任务优惠<br/>`PURCHASE`:购买                                                                                                                                                                                                                         |
| currency         | string      | 货币                                                  | 强烈建议     | 参考货币代码表(ISO4217)                                                                                                                                                                                                                                                                     |
| orderSource         | string   | 订单来源的枚举值，分为两类：<br/>1、用户购买官方的虚拟商品/充值；<br/>2、用户间的虚拟商品交易，如游戏道具、NFT藏品等                                                  | 建议     | 枚举值：<br/>mall: 订单来自官方商城，用来记录用户平台商城购买虚拟商品或充值；<br/>exchange: 订单来自玩家交易所，用来记录用户间的虚拟商品交易                                                                                                                                                                                                                                                                    |
#### <span id="finishOrder"> 完成订单 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------------------ | ------------ | -------------------------------------------------------------------------- | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| orderType              | string     | 订单类型                                                                 | 必传参数         | 可选值：offline：线下订单online：线上订单                                                                                                                                                                                                                                           |
| orderId            | string | 订单ID                                                               | 强烈建议     | 该商品订单唯一标识                                                                                                                                                                                                                                                                      |
| paymentOpenId      | string | 支付账户的唯一标识                                                   | 强烈建议     |                                                                                                                                                                                                                                                                                             |
| paymentAccountType | string | 支付账户类型，银行卡/微信/支付宝                                     | 强烈建议     | 可选值：<br/>`bank`:银行卡<br/>`weixin`:微信<br/>`alipay`:支付宝<br/>`others`:自由支付渠道                                                                                                                                                                                                            |
| voucherTimestamp   | int64  | 付款凭证上的付款时间戳                                               | 强烈建议     |                                                                                                                                                                                                                                                                                             |
| orderResult        | int    | 订单成功或失败（例如订单超时未支付；如果是订单取消则不要调用此接口） | 强烈建议 | 可选值：`1`:失败;`0`:成功                                                                                                                                                                                                                                                               |
| nickName           | string | 用户账户昵称                                                         | 建议         |                                                                                                                                                                                                                                                                                             |
| visitSubType           | string     | 扫描枪的类型                                                             | 必传参数         | 传入扫描枪的类型，例如：`CPC、IBM、SELF_CHECKOUT`                                                                                                                                                                                                                                             |
| products               | Json_array | 订单商品信息，详情见下文                                                 | 必传参数         |                                                                                                                                                                                                                                                                                             |
| paymentId              | string     | 付款 ID                                                                  | 强烈建议         | 用户进行一次下单付款动作的标识；该标识标记了用户发起的一次下单付款行为。                                                                                                                                                                                                                    |
| price                  | float64    | 下单优惠前的金额                                                         | 建议             | 货币计量单位为中国大陆法定货币人民币（CNY），单位：元例如：88.69                                                                                                                                                                                                                            |
| discount               | float64    | 该订单享受的优惠金额                                                     | 建议             | 商品订单原价 – 商品订单实际支付的价格                                                                                                                                                                                                                                                      |
| discountType | string   | 优惠来源                                          | 建议     |  可选值：<br/> `NEW_USER`:新用户优惠<br/>`REWARD_TASK`:奖励任务优惠<br/>`PURCHASE`:购买                                                                                                                                                                                                                         |
| shopId                 | string     | 门店编号                                                                 | 建议             |                                                                                                                                                                                                                                                                                             |
| shopCountry            | string     | 门店归属国家                                                             | 建议             | 用于社区团购场景若不存在传国家英文全称，如：CN                                                                                                                                                                                                                                              |
| shopProvince           | string     | 门店归属省                                                               | 建议             | 中文如：山东省                                                                                                                                                                                                                                                                              |
| shopCity               | string     | 门店归属市                                                               | 建议             | 中文如：北京市                                                                                                                                                                                                                                                                              |
| shopDistrict           | string     | 门店归属区                                                               | 建议             | 中文如：朝阳区                                                                                                                                                                                                                                                                              |
| shopAddress            | string     | 门店详细地址                                                             | 建议             |                                                                                                                                                                                                                                                                                             |

products 的内容如下：


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ---------------- | ------------ | --------------------------------------- | -------------- | ---------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| productId      | string | 商品 ID,SPU 标准化产品单元            | 必传参数 |                                              |
| productCount   | int        | 商品数量                              | 必传参数 |                                              |
| productType    | string     | 商品类型 建议用于需要特殊处理的商品， | 必传参数 | 根据需要传入即可，具体值可参考为：“贵金属” |
| merchantId     | string     | 商户 ID                               | 必传参数 | 若无法区分第三方（自营） 传特定值“自营”    |
| productBrand   | string     | 商品品牌                              | 强烈建议 | productBrand                                 |
| productName    | string     | 商品名称                              | 强烈建议 | productName                                  |
| productPrice   | float      | 商品价格                              | 强烈建议 | productPrice                                 |

#### <span id="payment"> 支付 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| --------------- | -------- | ----------------------------- | ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| method        | string | 支付方式                    | 强烈建议 | 可选值：<br/>`qrscan`:二维码支付，主动扫码<br/>`qrshow`:二维码支付，被动扫码（展示付款码给别人）<br/>`phone`:手机Pay支付<br/>`widget`:控件支付<br/>`wechatQr`: 微信扫码支付<br/>`aliPay`: 支付宝扫码/登录付款<br/>`debitCard`:借记卡支付<br/>`creditCard`:信用卡支付<br/>`huaweiPay`:华为钱包支付 |
| amount        | double | 支付金额                    | 强烈建议 |                                                                                                                                                                                                                                                                                 |
| currency      | string | 计价货币                    | 强烈建议 | 参考货币代码表(ISO4217)                                                                                                                                                                                                                                                         |
| channel       | string | 支付渠道                    | 强烈建议 |                                                                                                                                                                                                                                                                                 |
| cvvResultCode | string | cvv验证结果                 | 强烈建议 | 参考[http://www.emsecommerce.net/avs_cvv2_response_codes.htm](http://www.emsecommerce.net/avs_cvv2_response_codes.htm)                                                                                                                                                          |
| avsResultCode | string | 地址验证结果                | 强烈建议 | 参考[http://www.emsecommerce.net/avs_cvv2_response_codes.htm](http://www.emsecommerce.net/avs_cvv2_response_codes.htm)                                                                                                                                                          |
| cardBin       | string | 卡bin，银行卡前六位         | 强烈建议 |                                                                                                                                                                                                                                                                                 |
| bankCard      | string | 支付银行卡号                | 强烈建议 | 当支付方式为借记卡支付或信用卡支付时传入该字段<br/> XXXX-XXXX-XXXX-4242, 除后四位外，其余可用X代替                                                                                                                                                                              |
| orderId       | string | 订单编号                    | 强烈建议 | 当前支付的订单编号                                                                                                                                                                                                                                                              |
| bankCardPhone | string | 银行卡绑定的手机号          | 强烈建议 | 当支付方式为借记卡支付或信用卡支付时传入该字段                                                                                                                                                                                                                                  |
| prcid         | string | 银行卡所属人身份证号码的MD5 | 强烈建议 |                                                                                                                                                                                                                                                                                 |
| merchantType  | string | 收款商户类型                | 强烈建议 | 可选值为：<br/>`1`. normal: “普通商户”，商户资质要求较高，商户需要三证一表注册入网；<br/>`2`. micro：“小微商户”，商户不需要提供三证一表，提供普通身份信息注册商户；<br/>`3`. individual：“个人转账”，对收款方没有任何限制<br/>`4`. platform：“平台自身”                         |

#### <span id="addCard"> 绑卡 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| -------------------- | ------------ | ------------------------------------------------------------------------------ | -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| simVrfyRst         | string     | 本机号校验结果                                                               | 必传参数     | 取值：`0`: 不一致;`1`: 一致`2`: 本机号校验开关关闭 `3`: Token未取到 `4`: 设备指纹超时 `5`: 该用户手机号无法验证，包含境外手机号或取不到手机号的情况。若设备指纹后台本机号校验并落地接口中respCD返回其他非0000的应答码，直接通过此字段透传给数美 |
| bankCard       | string | 银行卡号                                                                 | 必传参数 |                                                                                                                                                                                                                             |
| bankCardPhone  | string | 银行卡绑定的手机号                                                       | 必传参数 |                                                                                                                                                                                                                             |
| simType            | string | sim卡所属运营商                                                          | 强烈建议 | `0`-移动；`1` -电信 `2`-联通当tokenStatus为000000时，type字段取值在上述0、1、2之间，其他情况type只能取9                                                                                                                             |
| deviceFP           | string | 设备指纹id                                                               | 建议     | 该字段由客户自行采集，用于跨数据源的数据关联等                                                                                                                                                                          |
| cardType       | string | 银行卡类型                                                               | 强烈建议 | 可选值：debit：借记卡credit：信用卡(贷记卡)combine:借贷合一semicredit：准贷记卡prepaid:预付卡                                                                                                       |
| accountType    | string | 账户类型                                                                 | 强烈建议 | 可选值：`I`:一类户，`II`:二类户;`III`:三类户                                                                                                                        |
| pidType        | string | 银行卡所属人证件类型                                                     | 必传参数 | 可选值:<br/>`prc`:身份证<br/>`milc`:军官证<br/>`passport`：护照<br/>`hrc`:回乡证<br/>`mtp`:台胞证<BR/>`polc`：警官证<BR/>`solc`：士兵证<br/>`other`：其它(境外)                                                                                                                 |
| pid            | string | 银行卡所属人证件号码                                                     | 必传参数 |                                                                                                                                                                                                                             |
| valid          | int    | 四要素、公安部等标准验证是否都成功。                                     | 必传参数 | 可选值：`1`：成功`0`：失败，任意标准验证失败                                                                                                                                                                        |
| elemsValid     | int    | 四/五要素验证是否成功。有4/5要素验证时传入，没有不传。           | 强烈建议 | 可选值：`1`：成功`0`：失败                                                                                                                                                                                              |
| smsValid       | int    | 银行预留手机号短信验证是否成功。有预留手机号短信验证时传入，没有时不传。 | 强烈建议 | 可选值：`1`：成功;`0`：失败                                                                                                                                                                                              |
| prcidValid     | int    | 公安部验证是否成功。有公安部验证时传入，没有时不传                       | 强烈建议 | 可选址：`1`：成功`0`：失败                                                                                                                                                                                              |
| countryCoderes | string | 预留手机号区号                                                           | 强烈建议 | 传入当前绑卡交易的预留手机号区号                                                                                                                                                                                        |

#### <span id="notify"> 交易结果 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------------ | ------------ | -------------------------------- | -------------- | --------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| notifyResult | int    | 交易结果                   | 必传参数 | 可选值：<br/>`1`:成功`0`:失败                                     |
| notifyEvent  | string | 被返回交易结果的事件       | 必传参数 | 可选值（被返回交易结果事件的eventId）：`transferpayment`            |
| triggerReqId | string | 触发当前事件的事件流水号。 | 必传参数 | 即，被返回交易结果的事件流水号                                            |
| Issuer       | string | 返回机构（发卡行）         | 强烈建议 | 取不到时传入空字符串。（注意，不是空白字符，而是长度为0的字符串） |
| IssuerId     | string | 返回机构代码（发卡行代码） | 强烈建议 |                                                                           |

#### <span id="transfer"> 转账 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------------ | ------------ | -------------------------------- | -------------- | --------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| notifyResult | int    | 交易结果                   | 必传参数 | 可选值：<br/>`1`:成功`0`:失败                                     |
| notifyEvent  | string | 被返回交易结果的事件       | 必传参数 | 可选值（被返回交易结果事件的eventId）：`transferpayment`            |
| triggerReqId | string | 触发当前事件的事件流水号。 | 必传参数 | 即，被返回交易结果的事件流水号                                            |
| Issuer       | string | 返回机构（发卡行）         | 强烈建议 | 取不到时传入空字符串。（注意，不是空白字符，而是长度为0的字符串） |
| IssuerId     | string | 返回机构代码（发卡行代码） | 强烈建议 |                                                                           |

#### <span id="identityVerify"> 实名认证 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| --------------------------------- | ------------ | ------------------------------------------------------------ | -------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| simType            | string | sim卡所属运营商                                                          | 强烈建议 | `0`-移动；`1` -电信 `2`-联通当tokenStatus为000000时，type字段取值在上述0、1、2之间，其他情况type只能取9                                                                                                                             |
| openId                      | string | 微信openId，APP端：为空                                | 强烈建议                                     | 没有可不传                                                                                                           |
| faceCertNum             | Int    | 人脸识别次数，如果没有人脸识别则传为-1             | 强烈建议                                     |                                                                                                                          |
| faceCertDuration            | Int    | 操作人脸视频录制时长，如果没有人脸视频录制则传为-1 | 强烈建议                                     |                                                                                                                          |
| age                         | Int    | 身份证年龄                                             | 强烈建议                                     |                                                                                                                          |
| prcidAddress                | string | 身份证地址                                             | 强烈建议                                     |                                                                                                                          |
| prcidCountry                | string | 身份证归属国家                                         | 强烈建议                                     |                                                                                                                          |
| prcidProvince           | string | 身份证归属省份                                         | 强烈建议                                     | 若无法解析，可不传                                                                                                   |
| prcidCity                   | string | 身份证归属城市                                         | 强烈建议                                     | 若无法解析，可不传                                                                                                   |
| bankCard                    | string | 银行卡卡号                                             | 强烈建议                                     | 不加密                                                                                                               |
| bankCardPhone                   | string | 银行卡预留手机号                                       | 强烈建议                                     |                                                                                                                          |
| birthday                        | string | 出生日期                                               | 强烈建议                                     |                                                                                                                          |
| nameOCR                     | string | OCR识别的身份证姓名                                    | 强烈建议                                     |                                                                                                                          |
| prcidOCR                    | string | OCR识别的申请人身份证号                            | 强烈建议                                     |                                                                                                                          |
| prcidValidTimestampStartOCR | string | ocr身份证生效日期                                      | 强烈建议                                     |                                                                                                                          |
| prcidValidTimestampEndOCR   | string | ocr身份证到期日期                                      | 强烈建议                                     |                                                                                                                          |
| prcidIssuingOrg             | string | 签发机关                                               | 强烈建议                                     |                                                                                                                          |
| smsValid                    | int    | 短信动态验证码验证结果                                 | 强烈建议                                     | `1`.有短信验证时传入;`2`:无短信验证时不传;可选值：`1`:成功<br/>`0`:失败                                            |
| faceValid                   | Int    | 人脸识别验证结果                                       | `1`:有人脸验证时传入`2`:无人脸验证时不传 | 可选值：`1`:成功<br/>`0`:失败                                                                                            |

#### <span id="deposit"> 存入 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------------- | ------------ | ------------------- | -------------- | ----------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| prodType          | string | 产品编号          | 必传参数     | 产品编号，互金产品信息查询接口返回                                                      |
| buyBaseAcctNo     | string | 购买账号          | 必传参数     |                                                                                         |
| tranAmt           | double | 购买金额          | 必传参数     | 单位：元                                                                                |
| payCode           | string | 支付方式（只有W） | 必传参数     | S凭印鉴支取<br/>P凭密码支取<br/>W无密码无印鉴支取<br/>B凭印鉴和密码支取<br/>O凭证件支取 |
| realRate          | double | 执行利率          | 强烈建议     |                                                                                         |
| couponCode        | string | 单卡券码          | 强烈建议     | 使用卡券是需要输入卡券号码                                                              |
| acctExec          | string | 推荐人            | 强烈建议     |                                                                                         |
| tranDate      | string | 交易日期      | 必传参数 | ESB接口字段，格式为YYYYMMDD                                                         |
| tranTimestamp | string | 交易时间      | 必传参数 | ESB接口字段，格式为HHMMSSNNN                                                        |
| sourceType        | string | 渠道类型          | 必传参数 | ESB接口字段，各系统提供渠道类型说明                                                 |
| seqNo         | string | 渠道流水号        | 必传参数 | ESB接口字段                                                                         |
| systemId      | string | 上游系统标识      | 强烈建议 | ESB接口字段                                                                         |
| partnerId     | string | 合作方标识        | 强烈建议 | ESB接口字段                                                                         |
| logId         | string | 全局流水号        | 强烈建议 | ESB接口字段                                                                         |
| transNo           | string | 交易流水码        | 必传参数 |                                                                                         |
| transIo           | string | 转入/转出         | 必传参数 | I转入O转出                                                                              |
| payerNm           | string | 付款方姓名或名称  | 强烈建议 |                                                                                         |
| payerAccNo        | string | 付款方账号        | 强烈建议 |                                                                                         |
| payerBankNo       | string | 付款方开户行行号  | 强烈建议 |                                                                                         |
| payerBankNm       | string | 付款方开户行行名  | 强烈建议 |                                                                                         |
| payeeNm           | string | 收款方姓名或名称  | 强烈建议 |                                                                                         |
| payeeAccNo        | string | 收款方账号        | 强烈建议 |                                                                                         |
| payeeBankNo       | string | 收款方开户行行号  | 强烈建议 |                                                                                         |
| payeeBankNm       | string | 收款方开户行行名  | 强烈建议 |                                                                                         |

#### <span id="cancelAccount"> 销户 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------------- | ------------ | --------------- | -------------- | ----------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| baseAcctNo        | string | 账号/卡号     | 必传参数     |                                                           |
| othBaseAcctNo     | string | 提现账号/卡号 | 必传参数     |                                                           |
| ccy               | string | 预授权币种    | 必传参数     |                                                           |
| tranDate      | string | 交易日期  | 必传参数 | ESB接口字段，格式为YYYYMMDD                       |
| tranTimestamp | string | 交易时间  | 必传参数 | ESB接口字段，格式为HHMMSSNNN                      |
| sourceType        | string | 渠道类型      | 必传参数 | ESB接口字段，各系统提供渠道类型说明，渠道表见下表 |
| seqNo         | string | 渠道流水号    | 必传参数 | ESB接口字段                                           |
| systemId      | string | 上游系统标识  | 强烈建议 | ESB接口字段                                           |
| partnerId     | string | 合作方标识    | 强烈建议 | ESB接口字段                                           |
| logId         | string | 全局流水号    | 强烈建议 | ESB接口字段                                           |
| accNo             | string | 账号          | 强烈建议 | 反洗钱黑名单接口字段                                  |
| custNo            | string | 客户号        | 强烈建议 | 反洗钱黑名单接口字段                                  |
| gender            | string | 性别          | 强烈建议 | 反洗钱黑名单接口字段M男F女N不填               |

#### <span id="refundApplication"> 应用内购买退款申请 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ----------------------- | ------------ | --------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| orderId           | string | 退款订单号                  | 必传     | 同下订单/下虚拟商品订单事件中的orderId                                                                                    |
| applicationReason | int    | 退款原因                    | 强烈建议 | 可选值：<br/>`1`：未到账<br/>`2`：未成年人购买<br/>`3`：家庭成员误购<br/>`4`：功能不符合预期<br/>`5`：意外点击购买<br/>`6`：不想要了<br/>`7`：其他 |
| applicationTime   | int64  | 申请退款时间，单位毫秒（ms) | 必传     |                                                                                                                               |

#### <span id="refundSuccess"> 应用内购买退款成功 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ----------------------- | ------------ | --------------------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| orderId           | string | 退款订单号                  | 必传     | 同下订单/下虚拟商品订单事件中的orderId                                                                                    |
| refundTime        | int64  | 退款成功时间，单位毫秒（ms) | 必传     |                                                                                                                               |
| applicationReason | int    | 退款原因                    | 强烈建议 | 可选值：<br/>`1`：未到账<br/>`2`：未成年人购买<br/>`3`：家庭成员误购<br/>`4`：功能不符合预期<br/>`5`：意外点击购买<br/>`6`：不想要了<br/>`7`：其他 |

#### <span id="dispute"> 争议 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| ------------- | -------- | ---------------- | ---------- | ------------------------------------------------------------------ |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| orderId     | string | 订单ID         | 必传     |                                                                  |
| result      | string | 争议结果       | 必传     | 可选值：<br/> `won` 成功<br/>`lost` 失败                              |
| disputeTime | int64  | 争议发送的时间 | 必传     |                                                                  |
| disputeType | string | 争议类型       | 必传     | 可选值:<br/>`first_dispute`<br/>`second_dispute`<br/>`arbitrary_court` |

#### <span id="chargeback"> 拒付 </span>


| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| -------------------- | -------- | ------------------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |
| chargebackTime     | int64  | 发起拒付的事件戳，毫秒 | 必传     |                                                                                                                                                                                                       |
| chargebackCurrency | string | 拒付货币单位           |          |                                                                                                                                                                                                       |
| chargebackAmount   | float  | 拒付金额               |          |                                                                                                                                                                                                       |
| reasonCode         | string | 拒付原因码             |          |                                                                                                                                                                                                       |
| type               | string | 类型                   |          | 可选值：<br/>`NoF`: Notification of fraud, 卡组织的欺诈提醒，还未发生cb<br/>`RFI`:  requirement for information， 还未发生cb,需要跟多的信息，需要及时回应<br/>`NoC`：notification of chargeback，cb已经发起 |
| gateway            | string | 支付网关               |          |                                                                                                                                                                                                       |
| reasonDescription  | string | 拒付原因描述           |          |                                                                                                                                                                                                       |
| cardCompany        | string | 信用卡卡组织           |          | `VISA, Mastercard, AMEX, JCB，Discovery, UnionPay`                                                                                                                                                      |
| issuer             | string | 发卡行                 |          |                                                                                                                                                                                                       |
| respondDeadline    | int64  | 响应拒付的最后期限     |          |                                                                                                                                                                                                       |
| fee                | float  | 拒付产生的费用         | 可选     |                                                                                                                                                                                                       |
| feeCurrency        | string | 拒付费用计费货币       | 可选     |                                                                                                                                                                                                       |

#### <span id="openAccount"> 开户 </span>
| **参数名称** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                                                                     |
| -------------------- | -------- | ------------------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [基础参数](#data)             |  |               |      |                   需要满足基础参数的配置要求                                                                                                                                                                                    |

## <span id = "requestExample">示例：</span>

### <span id = "requestExp">请求示例：</span>

```json
{
  "accessKey": "XXXXXXX",
  "eventId": "order",
  "appId": "default",
  "data": {
    "ip": "",
    "deviceId": "BQ144b7Xd4TAejWdbWOrB4SI0Gn7vaYxEybz2q22851RoABghw4evlXwXBlPjwY89Iv5kBZjE+nR7WDWFB94IPA==",
    "phone": "67e7fec84d482447595eff4109f87c58",
    "appVersion": "4.5.9",
    "tokenId": "8ddbb939193651b7a38f5fe33ab14e53",
    "isTokenSeperate": 0,
    "os": "android",
    "paymentMethod": "ONLINE_PAYMENT",
    "products": [
      {
        "merchantId": "",
        "productCount": 1,
        "productId": "60425"
      }
    ],
    "timestamp": 1652370840283,
    "activityId": "",
    "discountType": "PURCHASE"
  }
}

```

### <span id = "requestResponseExp">同步返回示例：</span>

```json
{
  "requestId": "0acfaaebbc01001113d6ad0b8c11eeb8",
  "riskLevel": "REJECT",
  "tokenRiskLabels": [
    {
      "timestamp": 1652370941818,
      "label1": "risk_device_token",
      "label2": "multi_boxing_token",
      "label3": "multi_boxing_by_app_token",
      "description": "风险设备账号:多开设备账号:工具多开设备账号"
    },
    {
      "label1": "risk_device_token",
      "label2": "multi_boxing_apps_token",
      "label3": "multi_boxing_apps_token",
      "description": "风险设备账号:安装多开工具设备账号:安装多开工具设备账号",
      "timestamp": 1652370941818
    }
  ],
  "detail": {
    "ip_province": "江西",
    "hits": [
      {
        "description": "高风险账号：账号异常聚集账号",
        "model": "M002020112",
        "riskLevel": "REJECT"
      },
      {
        "description": "高风险账号：数美风险模型识别",
        "model": "M002070002",
        "riskLevel": "REJECT"
      },
      {
        "riskLevel": "REJECT",
        "description": "高风险账号：数美风险模型识别",
        "model": "M00212001"
      },
      {
        "description": "高风险设备：账号异常聚集",
        "model": "M99120102",
        "riskLevel": "REJECT"
      }
    ],
    "model": "M99120102",
    "machineAccountRisk": {
      "tokenSampleDesc": "账号异常聚集",
      "tokenSampleLastTs": 1652370941818
    },
    "description": "高风险设备：账号异常聚集",
    "ip_country": "中国",
    "ip_city": "上饶"
  },
  "code": 1100,
  "message": "成功"
}
```

## <span id = "query">账号查询接口</span>


### <span id = "queryUrl">请求URL：</span>


| 集群   | URL                                                       | 支持产品列表 |
| -------- | ----------------------------------------------------------- | -------------- |
| 北京集群   | `http://api-tianxiang-bj.fengkongcloud.com/tianxiang/v4`  | 风险查询 |
| 新加坡集群 | `http://api-tianxiang-xjp.fengkongcloud.com/tianxiang/v4` | 风险查询 |
|法兰克福集群|`http://api-tianxiang-eur.fengkongcloud.com/tianxiang/v4`|风险查询 |
|弗吉尼亚集群|`http://api-tianxiang-fjny.fengkongcloud.com/tianxiang/v4`|风险查询 |

### <span id = "queryMethod">请求方法：</span>

`POST`

### <span id = "queryEncode">字符编码：</span>

`UTF-8`

### <span id = "queryTimeout">建议超时时间：</span>

1s

### <span id = "queryParameters">请求参数：</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **请求参数名** | **类型**    | **参数说明**                                                                                         | **是否必传** | **规范**                                        |
| ---------------- | ------------- | ------------------------------------------------------------------------------------------------------ | -------------- | ------------------------------------------------- |
| accessKey      | string      | 接口认证密钥<br/>用于权限认证，开通账号服务时由数美提供或使用开通邮箱登录数美后台右上角相关文档处查看 | 必传参数     | 数美分配                                        |
| data           | json_object | 请求的数据内容                                                                                       | 必传参数     | 请求的数据内容，最长10MB，[详见data参数](#data) |

<span id = "data">其中，data的内容如下：</span>


| **请求参数名** | **类型** | **参数说明**                                                                                                                                    | **是否必传** | **规范**                                                 |
| ---------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | ---------------------------------------------------------- |
| tokenId        | string   | 用户账号标识，建议使用贵司用户UID（可加密）自行生成 , 标识用户唯一身份用作灌水和广告等行为维度风控。如无用户uid的场景建议使用唯一的数据标识传值 | 不能为空 | 该ID为用户的唯一标识，且与其它数美接口的tokenId保持一致  |

### <span id = "queryResponse">返回结果</span>

放在HTTP Body中，采用Json格式，具体参数如下：


| **参数名称**       | **参数类型** | **参数说明**   | **是否必返** | **规范**                                                                                                                                                                                                    |
| -------------------- | -------------- | ---------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| code               | int          | 返回码         | 是           | `1100`：成功<br/>`1901`：QPS超限<br/>`1902`：参数不合法<br/>`1903`：服务失败<br/>`1911`：图片下载失败<br/>`9101`：无权限操作<br/>`3000`：运营商错误<br/>除message和requestId之外的字段，只有当code为1100时才会存在 |
| message            | string       | 返回码描述     | 是           | 和code对应：`成功 QPS超限 参数不合法 服务失败 余额不足 无权限操作`                                                                                                                                          |
| requestId          | string       | 请求标识       | 是           | 请求唯一标识，用于排查问题和后续效果优化，强烈建议保存                                                                                                                                                      |
| tokenLabels        | json_object  | 账号标签信息   | 否           | 见下面详情内容，仅在tokenId传入且服务开通时返回                                                                                                                                                             |
| tokenProfileLabels | json_array   | 账号属性标签   | 否           | 见下面详情内容，仅在tokenId传入且服务开通时返回                                                                                                                                                             |
| tokenRiskLabels    | json_array   | 账号风险标签   | 否           | 见下面详情内容，仅在tokenId传入且服务开通时返回                                                                                                                                                             |

其中

**1）tokenLabels的详情内容**


| ***返回结果参数名*** | ***参数类型*** | ***参数说明***   | ***规范***                 |
| ---------------------- | ---------------- | ------------------ | ---------------------------- |
| machine_account_risk | json_object    | 机器控制相关风险 |                            |
| UGC_account_risk     | json_object    | UGC内容相关风险  |                            |
| scene_account_risk   | json_object    | 场景账号风险     | 特殊场景才可取到，如航司等 |

machine_account_risk的详情内容如下：


| ***返回结果参数名***              | ***参数类型*** | ***参数说明*** | ***规范***                           |
| ----------------------------------- | ---------------- | ---------------- | -------------------------------------- |
| b_machine_control_tokenid         | int            | 机器账号       | `0`：非机器控制账号`1`：机器控制账号 |
| b_machine_control_tokenid_last_ts | int            | 机器账号时间   |                                      |
| b_offer_wall_tokenid              | int            | 积分墙账号     | `0`：非积分墙账号`1`：积分墙账号     |
| b_offer_wall_tokenid_last_ts      | int            | 积分墙账号时间 |                                      |

UGC_account_risk的详情内容如下：


| ***返回结果参数名***             | ***参数类型*** | ***参数说明*** | ***规范***                             |
| ---------------------------------- | ---------------- | ---------------- | ---------------------------------------- |
| b_politics_risk_tokenid          | int            | 涉政风险       | `0`：暂未发现涉政风险`1`：存在涉政风险 |
| b_politics_risk_tokenid_last_ts  | int            | 涉政风险时间   |                                        |
| b_sexy_risk_tokenid              | int            | 色情风险       | `0`：暂未发现色情风险`1`：存在色情风险 |
| b_sexy_risk_tokenid_last_ts      | int            | 色情风险时间   |                                        |
| b_advertise_risk_tokenid         | int            | 广告风险       | `0`：暂未发现广告风险`1`：存在广告风险 |
| b_advertise_risk_tokenid_last_ts | int            | 广告风险时间   |                                        |

scene_account_risk的详情内容如下：


| ***返回结果参数名***        | ***参数类型*** | ***参数说明*** | ***规范***                           |
| ----------------------------- | ---------------- | ---------------- | -------------------------------------- |
| i_tout_risk_tokenid         | int            | 航司占座账号   | `0`：非航司占座账号`1`：航司占座账号 |
| i_tout_risk_tokenid_last_ts | int            | 航司占座时间   |                                      |


其中标签类返回字段

***1***）tokenProfileLabels的详情内容


| ***返回结果参数名*** | ***参数类型*** | ***参数说明***         | ***规范***                   |
| ---------------------- | ---------------- | ------------------------ | ------------------------------ |
| label1               | string         | 一级标签               | 展示账号属性标签的一级标签。 |
| label2               | string         | 二级标签               | 展示账号属性标签的二级标签。 |
| label3               | string         | 三级标签               | 展示账号属性标签的三级标签。 |
| description          | string         | 风险描述               | 展示账号属性标签的中文描述。 |
| timestamp            | int64          | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail               | json_object    | 证据描述               | 证据细节                     |

***2***）tokenRiskLabels的详情内容


| ***返回结果参数名*** | ***参数类型*** | ***参数说明***         | ***规范***                   |
| ---------------------- | ---------------- | ------------------------ | ------------------------------ |
| label1               | string         | 一级标签               | 展示账号风险标签的一级标签。 |
| label2               | string         | 二级标签               | 展示账号风险标签的二级标签。 |
| label3               | string         | 三级标签               | 展示账号风险标签的三级标签。 |
| description          | string         | 风险描述               | 展示账号风险标签的中文描述。 |
| timestamp            | int64          | 最近一次命中策略的时间 | 最近一次命中策略的时间       |
| detail               | json_object    | 证据描述               | 证据细节                     |

## <span id = "queryExample">示例：</span>

### <span id = "queryRequestExp">请求示例：</span>

```json
{
  "accessKey": "xxxxxxxxxxxxxxxxxxxxxxxxx",
  "data": {
    "tokenId": "ceshitokenId"
  }
}
```

### <span id = "queryResponseExp">同步返回示例：</span>

```json
{
  "code": 1100,
  "message": "成功",
  "profileExist": 1,
  "requestId": "7a5445716f0581c2ab1d381a6af4d1b8",
  "tokenLabels": {
    "machine_account_risk": {
      "b_machine_control_tokenid": 1,
      "b_machine_control_tokenid_last_ts": 1587711321232,
      "b_offer_wall_tokenid": 1,
      "b_offer_wall_tokenid_last_ts": 1587711321232
    },
    "UGC_account_risk": {
      "b_politics_risk_tokenid": 1,
      "b_politics_risk_tokenid_last_ts": 1587711321232,
      "b_sexy_risk_tokenid": 1,
      "b_sexy_risk_tokenid_last_ts": 1587711321232,
      "b_advertise_risk_tokenid": 1,
      "b_advertise_risk_tokenid_last_ts": 1587711321232
    },
    "scene_account_risk": {
      "i_tout_risk_tokenid": 1,
      "i_tout_risk_tokenid_last_ts": 1587711321232
    },
    "account_active_info": {
      "i_tokenid_first_active_timestamp": 1587711321232,
      "i_tokenid_active_days_7d": 5,
      "i_tokenid_active_days_4w": 5
    },
    "account_freq_info": {
      "i_tokenid_login_cnt_1d": 5,
      "i_tokenid_login_cnt_7d": 5
    },
    "account_relate_info": {
      "i_tokenid_relate_smid_cnt_1d": 5,
      "i_tokenid_relate_smid_cnt_7d": 5,
      "i_tokenid_relate_ip_city_cnt_1d": 5,
      "i_tokenid_relate_ip_city_cnt_7d": 5
    },
    "account_common_info": {
      "s_tokenid_relate_smid_info_map_4w": [
        {
          "smid": "xxxx1",
          "days": "3"
        },
        {
          "smid": "xxxx2",
          "days": "5"
        },
        {
          "smid": "xxxx3",
          "days": "10"
        }
      ],
      "s_tokenid_relate_ip_city_info_map_4w": [
        {
          "city": "北京",
          "days": "3"
        },
        {
          "city": "长沙",
          "days": "5"
        },
        {
          "city": "武汉",
          "days": "10"
        }
      ]
    }
  },
  "tokenProfileLabels": [
    {
      "label1": "age_gender",
      "lable2": "token_age",
      "label3": "minor_token",
      "description": "年龄性别:年龄:未成年人",
      "timestamp": 1634732525000,
      "detail": {
      }
    }
  ],
  "tokenRiskLabels": [
    {
      "label1": "risk_device_token",
      "label2": "b_cloud_token_device",
      "label3": "b_cloud_token_device",
      "description": "风险设备账号:云手机账号:云手机账号",
      "timestamp": 1634732525000,
      "detail": {
      }
    },
    {
      "label1": "risk_device_token",
      "label2": "b_hook_token",
      "label3": "b_hook_token",
      "description": "风险设备账号:hook设备:hook设备",
      "timestamp": 1634732525000,
      "detail": {
      }
    }
  ]
}
```

