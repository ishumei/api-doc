# 数美人工审核服务API接口文档

- - - - -

***版权所有 翻版必究***

- - - - -

目录

[1. 接入前准备	](#_Toc21201 )

[1.1 数美服务账号申请	](#_Toc17791 )

[1.2 数美服务账号信息接收	](#_Toc19648 )

[2.数美人工审核服务说明](#_Toc25359 )

[2.1 普通人审结果回调接口	](#_Toc32283 )

[2.2 人机一体人审结果回调接口	](#_Toc11392 )





 

## 1. 接入前准备

### 1.1 数美服务账号申请

客户经理已提前与贵公司建立联系或当面拜访，可直接将开通账号及服务相关信息提供至客户经理。

开通账号所需信息包括：

公司全称：xxxxxx

公司简称：xxxxxx

接口人邮箱：xxx@xxx.xxx

接口人手机：1xxxxxxxxxx

### 1.2 数美服务账号信息接收

数美客户经理会在1个工作日内为您开通相应数美账号及服务，随后接口人邮箱会收到如下信息：

| **名称**             | **具体值** | **说明**                                   |
| -------------------- | ---------- | ------------------------------------------ |
| accessKey            | xxxxxx     | 数美API服务的认证码，调用数美API时需要传入 |
| 数美人审管理后台账号 | xxxxxx     | 用于登陆数美人审管理后台                   |
| 数美人审管理后台密码 | xxxxxx     | 用于登陆数美人审管理后台                   |
| 数美管理后台地址     |            | 用于登陆数美管理后台                       |

## 2.数美人工审核服务说明

数美提供普通人审结果回调、人机一体人审结果回调两大类接口。普通人审结果回调接口分为：静态单次回调与直播单次回调两类接口

### 2.1普通人审结果回调接口

#### 2.1.1静态单次回调结果

（静态内容包含文本、图片、音频文件、视频文件、融媒体）

##### 支持协议：

HTTP或HTTPS

客户自定义URL，请与数美客服联系设置具体回调地址。

##### 字符编码格式：

请求使用UTF-8字符集进行编码

##### 请求方法：

POST

| 参数名称  | 类型        | 是否必返 | 说明                                                         |
| --------- | ----------- | -------- | ------------------------------------------------------------ |
| requestId | string      | 是        | 请求流水号                                                   |
| serviceId | string      | 是        | POST_TEXT：文本，POST_IMG：图片，POST_AUDIO：音频，POST_VIDEO：视频 |
| result    | json_object | 是        | 人审结果                                                     |
| data      | json_object | 是        | 请求数据内容                                                 |

其中，result的内容如下：

| 参数名称    | 类型        | 是否必返 | 说明                                                         |
| ----------- | ----------- | -------- | ------------------------------------------------------------ |
| operation   | int         | 是        | 人审结果1：通过，2：不通过                                     |
| description | string      | 否        | 风险原因，支持客户自定义二级原因配置；若存在二级原因，则通过“/”进行拼接，例如：色情/露点 |
| tips        | string      | 否        | 用户侧显示文案；用于用户端反馈                             |
| evidences   | json_object | 否        | 证据信息（音频/视频返回）                                    |

 

其中，evidences的内容如下：

| 参数名称    | 类型       | 是否必返 | 说明                  |
| ----------- | ---------- | -------- | --------------------- |
| frameDetail | json_array |   否      | 风险截帧              |
| audioDetail | json_array |   否      | 风险音频片段          |
| title       | string     |  否     | 音频文件/视频文件名称 |
| cover       | string     |   否     | 视频封面              |

其中，frameDetail的内容如下：

| 参数名称  | 类型   | 是否必返 | 说明                                       |
| --------- | ------ | -------- | ------------------------------------------ |
| requestId | string | 否   | 截帧流水号                                 |
| imgUrl    | string | 否   | 截帧图片地址                               |
| time      | float  |   否     | 截帧在视频文件中的时间，单位为秒           |
| imgText   | string | 否   | 截帧图片OCR文字识别，识别类型包含OCR时会有 |

其中，audioDetail的内容如下：

| 参数名称       | 类型   | 是否必返 | 说明                                               |
| -------------- | ------ | -------- | -------------------------------------------------- |
| requestId      | string | 否        | 音频片段流水号                                     |
| audioUrl       | string |  否        | 音频片段地址                                       |
| audioText      | string |  否        | 音频转译文本的结果                                 |
| audioStarttime | float  | 否       | 音频片段开始时间，相对音频开始时间的距离，单位是秒 |
| audioEndtime   | float  | 否       | 音频片段结束时间，相对音频开始时间的距离，单位是秒 |

 

其中，data的内容如下：

| 参数名称    | 类型       | 是否必返 | 说明                                                         |
| ----------- | ---------- | -------- | ------------------------------------------------------------ |
| content     | string     | 是       | 审核内容：文本-审核文字内容，图片-图片链接地址，音频-音频链接地址，视频-视频链接地址 |
| tokenId     | string     | 是       | 用户账号                                                     |
| btId        | string     | 否       | 图片/音频文件/视频文件唯一标识                               |
| room        | string     | 否       | 房间号                                                       |
| appId       | string     | 否      | 应用                                                         |
| channel     | string     |  否     | 渠道                                                         |
| passThrough | json_array | 否    | 透传字段                                                     |

##### 返回参数

放在HTTP Body中，采用Json格式，具体参数如下：

| 参数名称 | 类型   | 是否必返 | 说明                                                     |
| -------- | ------ | -------- | -------------------------------------------------------- |
| code     | int    | 是       | 返回码，成功返回1100，会判断请求是否成功；非1100认为失败 |
| message  | string | 是      | 返回码详情描述                                           |

 

#### 2.1.2直播单次回调结果

（直播内容包含视频直播、音频直播）

##### 支持协议：

HTTP或HTTPS

客户自定义URL，请与数美客服联系设置具体回调地址。

##### 字符编码格式：

请求使用UTF-8字符集进行编码

##### 请求方法：

POST

| 参数名称  | 类型        | 是否必返 | 说明                                             |
| --------- | ----------- | -------- | ------------------------------------------------ |
| requestId | string      | 是        | 请求流水号                                       |
| serviceId | string      | 是      | POST_AUDIOSTREAM：音频流，POST_VIDEOSTREAM：视频流 |
| result    | json_object |   是      | 人审结果                                         |
| data      | json_object |  是     | 请求数据内容                                     |

其中，result的内容如下：

| 参数名称    | 类型        | 是否必返 | 说明                                                         |
| ----------- | ----------- | -------- | ------------------------------------------------------------ |
| target      | int         | 是     | 处置对象，可选值如下1：用户，2：房间                           |
| operation   | int         | 是     | 人审结果1：警告，2：禁言，3：断流，4：封禁                         |
| description | String      |  否    | 风险原因，支持客户自定义二级原因配置；若存在二级原因，则通过“/”进行拼接，例如：色情/露点 |
| tips        | string      | 否     | 用户侧显示文案；用于用户端反馈                             |
| duration    | int         | 否    | 处置时长，单位为秒，处置结果为“禁言”“封禁”时存在             |
| evidences   | json_object | 否     | 证据信息                                                     |

 

其中，evidences的内容如下：

| 参数名称    | 类型       | 是否必返 | 说明         |
| ----------- | ---------- | -------- | ------------ |
| frameDetail | json_array | 否      | 风险截帧     |
| audioDetail | json_array | 否    | 风险音频片段 |

 

其中，frameDetail的内容如下：

| 参数名称         | 类型   | 是否必返 | 说明                         |
| ---------------- | ------ | -------- | ---------------------------- |
| requestId        | string | 否      | 截帧流水号                   |
| imgUrl           | string | 否       | 截帧图片地址                 |
| beginProcessTime | string | 否       | 截帧开始处理时间（绝对时间） |

其中，audioDetail的内容如下：

| 参数名称         | 类型   | 是否必返 | 说明                             |
| ---------------- | ------ | -------- | -------------------------------- |
| requestId        | string | 否      | 音频片段流水号                   |
| audioUrl         | string | 否     | 音频片段地址                     |
| beginProcessTime | string | 否       | 音频片段开始处理时间（绝对时间） |

 

其中，data的内容如下：

| 参数名称    | 类型       | 是否必返 | 说明            |
| ----------- | ---------- | -------- | --------------- |
| tokenId     | string     | 否        | 用户账号        |
| room        | string     | 否       | 房间号          |
| streamId    | string     | 否       | 音频流/视频流ID |
| channel     | string     | 否      | 渠道            |
| passThrough | json_object | 否        | 透传字段        |

##### 返回参数

放在HTTP Body中，采用Json格式，具体参数如下：

| 参数名称 | 类型   | 是否必选 | 说明                                                     |
| -------- | ------ | -------- | -------------------------------------------------------- |
| code     | int    | 是       | 返回码，成功返回1100，会判断请求是否成功；非1100认为失败 |
| message  | string | 是       | 返回码详情描述                                           |

 

### 2.2人机一体人审结果回调接口

（当前只支持文本、图片）

​数美可支持按照贵司自定义标签体系和处置进行结果回调，详细可咨询数美商务经理关于“人机一体”接入方案。

##### 支持协议：

HTTP或HTTPS

客户自定义URL，请与数美商务经理联系设置具体回调地址。

##### 字符编码格式：

请求使用UTF-8字符集进行编码

##### 请求方法：

POST

| 请求参数名               | 字段类型               | 是否必返 | 参数说明                                                     | 规范                                                         |
| ------------------------ | ---------------------- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| requestId                | string                 | 是       |    请求标识                                                       |                                                              |
| code                     | int                 | 是       |  返回码                                                            |  1100：成功|
| message                  | string                 | 是       |    返回码描述                                                          |                                                              |
| riskLevel                | string                 | 否       | 数美人审处置建议                                             |                                                              |
| riskLabel1               | string                 | 否       | 人审确认的数美一级标签                                       |                                                              |
| riskLabel2               | string                    | 否       | 人审确认的数美二级标签                                                             |                                                              |
| riskLabel3               | string                   | 否       |人审确认的数美三级标签                                                              |                                                              |
| riskDescription          | string                 | 否       | 风险描述                                                     | 当riskLevel为PASS时为"正常" |
| finalResult              | int                    | 否       | 值为1，贵司可直接拿返回结果进行处置、分发等下游场景的使用；值为0，说明该结果为数美风控的过程结果，还需要经过数美人审再次check后回传贵司 | 0:非最终结果，1:最终结果                                       |
| resultType               | int                    | 否       | 当前结果是机审还是人审环节给出的                             | 0：机审，1：人审                                               |
| disposal                 | json_object            | 否       | 数美可按照贵司的标签体系和标识进行返回；未配置自定义标签体系则不返回该字段 |                                       |

其中disposal的内容如下：

| 请求参数名               | 字段类型               | 是否必返 | 参数说明                                                     | 规范                                                         |
| ------------------------ | ---------------------- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| riskLevel       | string                 | 否       | 若贵司有自己的处置规则与处置手段，数美可按照贵司的处置逻辑返回对应的处置建议；如未配置自定义处置默认返回数美处置建议 | 当数美标签未映射上自定义标签时，值为PASS                     |
| riskLabel1      | string                 | 否       | 自定义一级标签标识                                           |  当数美标签未映射上自定义标签,riskLevel为PASS时返回normal                             |
| riskLabel2      | string                 | 否       | 自定义二级标签标识                                           | 当riskLevel为PASS时为空字符串                                |
| riskLabel3      | string                 | 否       | 自定义三级标签标识                                           | 当riskLevel为PASS时为空字符串                                |
| riskDescription | string                 | 否       | 自定义标签名称                                               | 格式：一级标签名称:二级标签名称:三级标签名称当riskLevel为PASS时为空字符串 |
