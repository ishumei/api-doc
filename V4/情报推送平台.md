# <span id="intelPushApi">数美-情报推送平台</span>

---

版权所有 翻版必究

---

* [情报推送](#intelPushApi)
    + [情报接收接口](#receiveInterface)
    + [使用场景](#usage)
    + [注意事项](#notice)
    + [请求说明](#requestInfo)
    + [请求参数](#requestParameters)
    + [数据推送示例](#examples)
    + [状态码](#statusCode)

## <span id="receiveInterface">**情报接收**</span>

本服务用于向合作方推送情报数据，如需开通请联系数美商务，并提供可接收本文所述 API 请求的接口地址；若需要鉴权，请同时提供相应的请求头字段及取值约定。 

## <span id="usage">**使用场景**</span>

该服务适用于数美侧产生情报后，实时或准实时推送给合作方自建风控 / 运营系统，用于风险识别与监控。  
典型场景包括但不限于：
- 新增或更新的黑产情报需要同步到合作方系统，用于实时拦截、风控审核或监控预警；
- 将情报落库，与业务日志进行关联分析，用于离线风控建模、审计与报表；
- 其他基于情报进行策略调整、运营决策或安全分析的场景。

## <span id="notice">**注意事项**</span>

调用本服务时建议注意以下安全配置：
- 建议使用 HTTPS 协议，避免情报数据在传输过程中被窃听或篡改；
- 建议通过 HTTP 请求头携带鉴权信息，例如双方约定使用 `X-AK`、`X-SK` 字段传递访问密钥及签名 / 密钥等内容，具体字段名与取值由合作方在开通时提供；
- 建议在合作方接收服务侧配置数美出口 IP 白名单，仅放通约定的 IP 或网段，从源头降低被恶意伪造请求的风险。

## <span id="requestInfo">**请求说明**</span>

| **请求地址** | http://ip:port/api/v1 |
| ------------ | --------------------- |
| **请求方法** | POST                  |

以上请求地址仅为示例，实际推送目标地址（含域名、端口及路径）由合作方在自身服务中自行定义，并在开通服务时与数美确认。 

## <span id="requestParameters">**请求参数**</span>

### **Header**

| **参数名称** | **类型** | **是否必选** | **示例值**       | **说明** |
| ------------ | -------- | ------------ | ---------------- | -------- |
| Content-Type | string   | 是           | application/json |          |

### **Body**

| **参数名称** | **类型**   | **是否必传** | **示例值**          | **说明**                                                     |
| ------------ | ---------- | ------------ | ------------------- | ------------------------------------------------------------ |
| infoId       | string     | 是           | 17129701            | 黑产情报的唯一标识，用于幂等处理等                           |
| createDate   | long       | 是           | 1729518643000       | 该黑产情报创建的时间戳（毫秒）                               |
| price        | float      | 是           | 0.35                | 该黑产情报中涉及的交易价格                                   |
| count        | int        | 是           | 2                   | 该黑产情报中商品交易的次数（放单量）                         |
| channelId    | string     | 是           | channel_a           | 情报渠道标识，由双方约定的字符串编码，用于区分不同情报来源渠道，可选值及含义以实际接入配置为准 |
| tagGroup     | string     | 否           |                     | 重点情报源名称，不建议使用，后续会废弃                       |
| tagRisk      | string     | 是           | 虚假助力            | 风险类型，可选值示例：<br/>代下单、积分代录、到柜领样、付邮试用、薅券、洗钱、积分兑换、脚本刷资源、扫号线索、假量、小样机、虚假试驾、虚假助力、一物一码、账号交易、资源交易、刷榜、营销任务、券码倒卖 |
| groupId      | string     | 是           | xxx@chatroom        | 情报渠道下群组/频道的唯一标识，具体含义由不同情报渠道自定义 |
| groupName    | string     | 是           | huzhubang           | 情报渠道下群组/频道名称，具体含义由不同情报渠道自定义，例如具体活动名称、群组名称等 |
| region       | string     | 是           | 亚洲-中国           | 情报发布地区                                                 |
| userId       | string     | 是           | wxid_h2kmrch1zryn22 | 情报渠道下发布人ID，在部分渠道中为该渠道内的用户唯一标识     |
| userName     | string     | 是           |                     | 情报渠道下发布人名称，例如站点或应用内展示给用户的昵称       |
| taskTag      | string     | 是           |                     | 任务标签（竖线分隔），自定义任务标签                         |
| tagRiskWords | string     | 是           | 回柜礼              | 命中的风险关键词，无匹配时为空串                             |
| brandWords   | json_array | 是           | 品牌A               | 命中的品牌关键词数组，在品牌打标时命中的关键词               |
| info         | json_array | 是           |                     | 黑产情报详细内容列表，每个元素为一条内容                     |
| info.content | string     | 是           |                     | 单条情报内容：<br/>当 type 为 text 时表示文本信息；当 type 为 image 时表示图片链接 |
| info.type    | string     | 是           | text；image；       | 内容类型，可选值：<br/>text：文本；image：图片               |

### <span id="examples">**数据推送示例**</span>

channelId = channel_a   情报源示例如下所示：

```json
{
  "brandWords": [
    "品牌A"
  ],
  "channelId": "channel_a",
  "count": 2,
  "createDate": 1731580150282,
  "groupId": "",
  "groupName": "example_group",
  "info": [
    {
      "content": "示例文本内容1",
      "type": "text"
    },
    {
      "content": "示例文本内容2",
      "type": "text"
    },
    {
      "content": "http://example.com/image1.jpg",
      "type": "image"
    },
    {
      "content": "示例文本内容3",
      "type": "text"
    },
    {
      "content": "http://example.com/image2.jpg",
      "type": "image"
    }
  ],
  "infoId": "info_example_01",
  "messageId": "msg_example_01",
  "price": 0.14,
  "region": "示例地区",
  "tagGroup": "示例情报源",
  "tagRisk": "示例风险类型",
  "tagRiskWords": "示例风险词",
  "taskTag": "示例任务标签",
  "userId": "user_001",
  "userName": "示例用户A"
}
```

channelId = channel_b  情报源示例如下所示：

```json
{
  "brandWords": [
    "品牌A"
  ],
  "channelId": "channel_b",
  "count": 0,
  "createDate": 1763691591385,
  "groupId": "group_001",
  "groupName": "示例微信群名称",
  "info": [
    {
      "content": "示例文本内容1",
      "type": "text"
    },
    {
      "content": "示例文本内容2",
      "type": "text"
    },
    {
      "content": "示例文本内容3",
      "type": "text"
    }
  ],
  "infoId": "info_example_02",
  "messageId": "msg_example_02",
  "price": 0,
  "region": "示例地区",
  "tagGroup": "",
  "tagRisk": "",
  "tagRiskWords": "",
  "taskTag": "",
  "userId": "user_002",
  "userName": ""
}
```

channelId = channel_c  情报源示例如下所示：

```json
{
  "brandWords": [
    "品牌A"
  ],
  "channelId": "channel_c",
  "count": 0,
  "createDate": 1763642350000,
  "groupId": "",
  "groupName": "示例话题名称",
  "info": [
    {
      "content": "https://example.com/post/123456",
      "type": "text"
    },
    {
      "content": "示例文本内容，描述某活动信息等。",
      "type": "text"
    }
  ],
  "infoId": "info_example_03",
  "messageId": "msg_example_03",
  "price": 0,
  "region": "示例地区",
  "tagGroup": "",
  "tagRisk": "",
  "tagRiskWords": "",
  "taskTag": "",
  "userId": "",
  "userName": "示例用户B"
}
```

channelId = channel_d   情报源示例如下所示：

```json
{
  "brandWords": [
    "品牌A"
  ],
  "channelId": "channel_d",
  "count": 1,
  "createDate": 1763381422000,
  "groupId": "",
  "groupName": "",
  "info": [
    {
      "content": "示例商品标题，全新未拆封，支持邮寄等说明文本。",
      "type": "text"
    },
    {
      "content": "http://example.com/item-image.jpg",
      "type": "image"
    }
  ],
  "infoId": "info_example_04",
  "messageId": "msg_example_04",
  "price": 299,
  "region": "示例地区",
  "tagGroup": "",
  "tagRisk": "",
  "tagRiskWords": "",
  "taskTag": "",
  "userId": "",
  "userName": "示例用户C"
}
```

channelId = channel_e   情报源示例如下所示：

```json
{
  "brandWords": [
    "品牌A"
  ],
  "channelId": "channel_e",
  "count": 0,
  "createDate": 1764755832083,
  "groupId": "",
  "groupName": "",
  "info": [
    {
      "content": "示例英文文案内容，描述某品牌活动信息。",
      "type": "text"
    },
    {
      "content": "更多信息示例说明文本。",
      "type": "text"
    },
    {
      "content": "https://example.com/image.png",
      "type": "image"
    },
    {
      "content": "示例活动文案，包含优惠信息等。",
      "type": "text"
    },
    {
      "content": "示例补充说明文案。",
      "type": "text"
    }
  ],
  "infoId": "info_example_05",
  "messageId": "msg_example_05",
  "price": 0,
  "region": "示例地区",
  "tagGroup": "",
  "tagRisk": "",
  "tagRiskWords": "",
  "taskTag": "",
  "userId": "",
  "userName": "示例用户D"
}
```

## <span id="statusCode">**状态码**</span>

| **HTTP 状态码** | **错误码** | **错误信息** | **说明**     |
| --------------- | ---------- | ------------ | ------------ |
| 200             |            | 成功         | 请求处理成功 |